<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>CatalpaFlat&#39;s Blogs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="IT technology has no end.">
<meta property="og:type" content="website">
<meta property="og:title" content="CatalpaFlat&#39;s Blogs">
<meta property="og:url" content="https://catalpaflat.github.io/index.html">
<meta property="og:site_name" content="CatalpaFlat&#39;s Blogs">
<meta property="og:description" content="IT technology has no end.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CatalpaFlat&#39;s Blogs">
<meta name="twitter:description" content="IT technology has no end.">
    

    
        <link rel="alternate" href="/" title="CatalpaFlat&#39;s Blogs" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">CatalpaFlat&#39;s Blogs</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.jpeg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.jpeg" />
            <h2 id="name">CatalpaFlat</h2>
            <h3 id="title">A good DEMO is a good brick wall.</h3>
            <span id="location"><i class="fa fa-map-marker"></i>ShenZhen, China</span>
            <a id="follow" target="_blank" href="https://github.com/CatalpaFlat">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                20
                <span>posts</span>
            </div>
            <div class="article-info-block">
                5
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/CatalpaFlat" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/28/hello-world/">Hello World</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/28/hello-world/">
            <time datetime="2018-03-28T02:05:56.000Z" itemprop="datePublished">2018-03-28</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Java/">Java</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Java/">Java</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/03/28/hello-world/" data-id="cjfb3thde000qrk5lddimq2x8" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Java 内存详解" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/23/Java 内存详解/">Java JVM 内存详解</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/23/Java 内存详解/">
            <time datetime="2018-03-23T07:53:56.000Z" itemprop="datePublished">2018-03-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Java/">Java</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Java/">Java</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>[TOC]</p>
<h1 id="Java-JVM-内存详解"><a href="#Java-JVM-内存详解" class="headerlink" title="Java JVM 内存详解"></a>Java JVM 内存详解</h1><h2 id="一、Java内存分配-数据存储区域-："><a href="#一、Java内存分配-数据存储区域-：" class="headerlink" title="一、Java内存分配(数据存储区域)："></a>一、Java内存分配(数据存储区域)：</h2><h3 id="1-程序计数器（Program-Counter-Register）"><a href="#1-程序计数器（Program-Counter-Register）" class="headerlink" title="1. 程序计数器（Program Counter Register）"></a>1. 程序计数器（Program Counter Register）</h3><ul>
<li>当前线程所执行的字节码行号指示器</li>
<li>一块较小的内存空间</li>
<li>线程私有内存</li>
</ul>
<p>由于Java虚拟机是多线程的，因此在多线程执行时候，其实是线程之间的轮流切换从而来获取CPU的处理，因此想要记录当前线程上一步所执行到哪里，就是通过程序计数器，这样就能在下次当前线程获取CPU的执行权的时候，能够正常继续执行。因此每一条线程都其自身的程序计数器，线程间互补影响，独立存储。</p>
<h3 id="2-Java-虚拟机栈"><a href="#2-Java-虚拟机栈" class="headerlink" title="2. Java 虚拟机栈"></a>2. Java 虚拟机栈</h3><ul>
<li>当前执行方法的内存模型</li>
<li>线程私有内存</li>
</ul>
<p>当一个方法被执行时，会创建一个栈帧用来存储：</p>
<ul>
<li>局部变量表</li>
<li>操作栈</li>
<li>动态链接</li>
<li>方法出口</li>
<li>……<br>其实Java虚拟机栈就是我们经常所说的“栈内存”<br>其中64位长度的long和double类型的数据会占用2个局部变量空间（Slot），其余的数据类型只占用1个。<br>局部变量表所需要的内存空间，在编译期完全分配好，当进入一个方法，这个方法需要在帧中分配多大的局部变量表内存空间是完全群的，不会在方法运行时改变局部变量表的大小。</li>
</ul>
<h3 id="3-本地方法栈"><a href="#3-本地方法栈" class="headerlink" title="3. 本地方法栈"></a>3. 本地方法栈</h3><p>本地方法栈（Native Method Stacks）与虚拟机栈所发挥的作用是非常相似的，其区别不过是虚拟机栈为虚拟机执行Java方法（也就是字节码）服务，而本地方法栈则是为虚拟机使用到的Native方法服务。</p>
<h3 id="4-堆"><a href="#4-堆" class="headerlink" title="4. 堆"></a>4. 堆</h3><p>Java堆（Java Heap）是Java虚拟机所管理的内存中最大的一块。Java堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例都在这里分配内存。</p>
<h3 id="5-方法区"><a href="#5-方法区" class="headerlink" title="5. 方法区"></a>5. 方法区</h3><p>方法区（Method Area）与Java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。</p>
<h4 id="5-1-运行时常量池："><a href="#5-1-运行时常量池：" class="headerlink" title="5.1 运行时常量池："></a>5.1 运行时常量池：</h4><pre><code>运行时常量池（Runtime Constant Pool）是方法区的一部分。Class文件中除了有类的版本、字段、方法、接口等描述等信息外，还有一项信息是常量池（Constant Pool Table），用于存放编译期生成的各种字面量和符号引用，这部分内容将在类加载后存放到方法区的运行时常量池中。
</code></pre><h2 id="二、Java对象的内存创建、内存布局、内存访问"><a href="#二、Java对象的内存创建、内存布局、内存访问" class="headerlink" title="二、Java对象的内存创建、内存布局、内存访问"></a>二、Java对象的内存创建、内存布局、内存访问</h2><h3 id="1-对象内存创建"><a href="#1-对象内存创建" class="headerlink" title="1. 对象内存创建"></a>1. 对象内存创建</h3><p>1）使用new<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                                    -&gt; (有) 是否已经加载、解析、初始化                -&gt; 指针碰撞                     -&gt; 进行同步处理</span><br><span class="line">常量池 -&gt; （检索）是否有该类的符号引用                                    -&gt;  分配内存              -&gt;(分配时的线程安全)                  -&gt;(初始化)</span><br><span class="line">                                    -&gt; (无) 加载 、解析                              -&gt; 空闲列表                     -&gt; TLAB(线程缓冲)</span><br></pre></td></tr></table></figure></p>
<p>2）赋值引用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                      -&gt; 存在    -&gt; 栈中的reference指向对象</span><br><span class="line">堆  -&gt; (查询是否存在)</span><br><span class="line">                      -&gt; 不存在  -&gt; null</span><br></pre></td></tr></table></figure></p>
<h3 id="2-对象内存布局"><a href="#2-对象内存布局" class="headerlink" title="2. 对象内存布局"></a>2. 对象内存布局</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    -&gt; 对象头</span><br><span class="line">布局 -&gt; 实例数据</span><br><span class="line">    -&gt; 对齐填充</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">          -&gt; 1)存储对象自身的运行时数据，如哈希吗、GC分代年龄、锁状态标志、线程持有的锁、偏向线程ID、偏向时间戳等</span><br><span class="line">1.对象头：</span><br><span class="line">          -&gt; 2)类型指针，指向它的类元数据（元数据即关于数据的数据），虚拟机通过这个指针确定这个对象是哪个类的实例。</span><br></pre></td></tr></table></figure>
<ol>
<li><p>实例数据：对象真正存储的有效信息，也是在代码中所定义的各种类型的字段内容。无论是从父类继承的还是子类中定义的，都需要记录起来。</p>
</li>
<li><p>对齐填充：并不是必然存在的，仅仅起着占位符的作用。HotSpot的自动内存管理系统要求对象起始地址必须是8字节的整数倍，因此当对象实例数据部分没有对齐时，需要对齐填充来补全。</p>
</li>
</ol>
<h3 id="3-对象内存访问"><a href="#3-对象内存访问" class="headerlink" title="3. 对象内存访问"></a>3. 对象内存访问</h3><pre><code>-&gt;  句柄
</code></pre><p>访问方式<br>        -&gt;  直接指针</p>
<ol>
<li>句柄：Java堆中会划分出一块内存作为句柄池，栈中的reference指向对象的句柄地址，句柄中包含了对象实例数据和类型数据各自的具体地址信息。</li>
</ol>
<p><img src="http://img.blog.csdn.net/20150621105931517" alt=""></p>
<ol>
<li>直接指针：reference中存储的就是对象地址</li>
</ol>
<p><img src="http://img.blog.csdn.net/20150621105820153" alt=""></p>
<p>使用句柄访问的最大好处就是reference中存储的是稳定的句柄地址，对象被移动（垃圾收集时移动对象是非常普遍的行为）时只会改变句柄中的实例数据指针，reference本身不需要修改。<br>使用直接指针访问的最大好处就是速度快，节省了一次指针定位的时间开销。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/03/23/Java 内存详解/" data-id="cjfb3thcq0000rk5l595sby6p" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-JavaEE 使用Gradle发布jar包到远程中央仓库" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/23/JavaEE 使用Gradle发布jar包到远程中央仓库/">JavaEE 使用Gradle发布jar包到远程中央仓库</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/23/JavaEE 使用Gradle发布jar包到远程中央仓库/">
            <time datetime="2018-03-23T07:53:56.000Z" itemprop="datePublished">2018-03-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/JavaEE/">JavaEE</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JavaEE/">JavaEE</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="JavaEE-使用Gradle发布jar包到远程中央仓库"><a href="#JavaEE-使用Gradle发布jar包到远程中央仓库" class="headerlink" title="JavaEE 使用Gradle发布jar包到远程中央仓库"></a>JavaEE 使用Gradle发布jar包到远程中央仓库</h1><h2 id="0-前提准备"><a href="#0-前提准备" class="headerlink" title="0. 前提准备"></a>0. 前提准备</h2><p><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 上 New Repository 项目<br>（若没有则注册）. </p>
<p><img src="img/WechatIMG4.jpeg" alt=""></p>
<h2 id="1-创建Bintray账号"><a href="#1-创建Bintray账号" class="headerlink" title="1. 创建Bintray账号"></a>1. 创建Bintray账号</h2><p>前往 <a href="https://bintray.com" target="_blank" rel="noopener">Bintray</a> ，右上角点击 Sign In 跳转到登录页面，可以选择通过第三方账号登录或者自己注册一个，方便起见我直接用了Github账号。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-77f14e1f0192a478.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="">.   </p>
<h2 id="2-Bintray上创建maven仓库"><a href="#2-Bintray上创建maven仓库" class="headerlink" title="2. Bintray上创建maven仓库"></a>2. Bintray上创建maven仓库</h2><p>登录后点击左侧的 Add new Repository按钮 跳转到创建仓库的页面，Name一栏填写仓库的名字，这里我写的是maven，仓库类型选 Maven ，创建完成后仓库就可以使用了。   </p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-b213b5021b9e9e2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt=""></p>
<h2 id="3-获取BINTRAY-KEY"><a href="#3-获取BINTRAY-KEY" class="headerlink" title="3. 获取BINTRAY_KEY"></a>3. 获取BINTRAY_KEY</h2><p>其中 BINTRAY_KEY 的值设为Api key，从下图所示位置获取:   </p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-53e8dc28d2686af6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt=""></p>
<h3 id="4-注册JIRA账号"><a href="#4-注册JIRA账号" class="headerlink" title="4. 注册JIRA账号"></a>4. 注册JIRA账号</h3><p><a href="https://issues.sonatype.org/secure/Dashboard.jspa" target="_blank" rel="noopener">注册链接</a><br>注册之后请妥善保管好账号密码，后续登录相关Nexus链接需要用到。  </p>
<h3 id="5-创建issue"><a href="#5-创建issue" class="headerlink" title="5. 创建issue"></a>5. 创建issue</h3><p>注册完之后创建ISSUE<br><img src="img/WechatIMG32.jpeg" alt="">.  </p>
<h2 id="6-GPG签名"><a href="#6-GPG签名" class="headerlink" title="6. GPG签名"></a>6. GPG签名</h2><p>GPG(GnuPG)是一款非对称加密软件，上传的Jar包需要用GPG生成签名文件，否则是不能同步到MavenCentral的，使用GPG给文件签名需要有公钥，可以用Bintray提供的默认的公钥或者使用自己生成的公钥，以下两种方法二选一。</p>
<h3 id="6-1-较简单方法"><a href="#6-1-较简单方法" class="headerlink" title="6.1 较简单方法"></a>6.1 较简单方法</h3><p>该方法比较便捷，不需要进行生成密钥等繁琐操作。首先进入你创建的仓库页面，点击 Edit ，进入编辑页面</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-663cb5fb4f34e8cb.png?imageMogr2/auto-orient/" alt=""></p>
<p>然后勾选如图所示的选项，当你上传Jar文件时系统就会自动帮你生成签名文件。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-03cd07c8394d4eab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="">. </p>
<h3 id="6-2-较复杂方法"><a href="#6-2-较复杂方法" class="headerlink" title="6.2 较复杂方法"></a>6.2 较复杂方法</h3><h4 id="1-下载GPG"><a href="#1-下载GPG" class="headerlink" title="1. 下载GPG"></a>1. 下载GPG</h4><p>1.下载安装。 </p>
<p>(1) Mac操作系统：  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gnupg</span><br></pre></td></tr></table></figure>
<p>(2) Windows操作系统<br>下载地址：<a href="https://www.gpg4win.org/" target="_blank" rel="noopener">https://www.gpg4win.org/</a></p>
<p>2.校验  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --version</span><br></pre></td></tr></table></figure>
<p><img src="img/WechatIMG5.jpeg" alt=""></p>
<h4 id="2-配置GPG生成对称签名"><a href="#2-配置GPG生成对称签名" class="headerlink" title="2. 配置GPG生成对称签名"></a>2. 配置GPG生成对称签名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-key</span><br></pre></td></tr></table></figure>
<p>1.输入姓名和邮箱<br><img src="img/WechatIMG7.jpeg" alt=""><br>2.输入passphrase密码<br><img src="img/WechatIMG8.jpeg" alt=""><br>3.记住密钥，用于上传<br><img src="img/WechatIMG9.jpeg" alt="">   </p>
<h4 id="3-上传GPG签名"><a href="#3-上传GPG签名" class="headerlink" title="3. 上传GPG签名"></a>3. 上传GPG签名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">gpg --keyserver hkp://keys.gnupg.net --send-keys 上图圈出来的密钥</span><br><span class="line">```    </span><br><span class="line">![](img/WechatIMG11.jpeg)   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>### 4. 回Bintray的界面</span><br><span class="line">(1).点击右上角导航栏的头像，点击 Edit Profile。</span><br><span class="line">   </span><br><span class="line">   ![](https://upload-images.jianshu.io/upload_images/4675459-284e0e5a1b672ff1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/232)</span><br><span class="line"> </span><br><span class="line">(2).跳转到以下页面，点击GPG Signing。</span><br><span class="line"></span><br><span class="line">  ![](https://upload-images.jianshu.io/upload_images/4675459-4f8038756be33ed9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/292)</span><br><span class="line">  </span><br><span class="line">(3).把刚才导出的公钥和私钥粘贴进去，包括虚线的两行文本，然后点击 Update。</span><br><span class="line"></span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-a60a639f88a40cfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/583)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>### 5. 回到仓库页面，点击Edit</span><br><span class="line"></span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-627856113530cc2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/627)   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>### 6.开启自动签名功能，配置就完成了</span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-cfe3b95c277d369a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700)   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span># 7.获取OSSRH_TOKEN信息</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>## 1.使用Sonatype账号[登录](https://oss.sonatype.org)，点击 Profile    </span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-dddadef2a64dbab8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/440)</span><br><span class="line"><span class="meta">#</span>## 2.点击 Access User Token 查看你的Token</span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-075ea8a731642ca6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700).  </span><br><span class="line"></span><br><span class="line">左边输入框是你的username，右边是你的密码，建议把账号有关的信息从环境变量中读取，不要提交到VCS中。   </span><br><span class="line">![](https://upload-images.jianshu.io/upload_images/4675459-c04e5d7025d05998.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span># 8. 配置项目bulid.gradle</span><br><span class="line"><span class="meta">#</span>## 1. gradle.properties.</span><br></pre></td></tr></table></figure>
<p>DEVELOPER_ID=CatalpaFlat<br>DEVELOPER_NAME=CatalpaFlat<br><a href="mailto:DEVELOPER_EMAIL=catalpaflat@outlook.com" target="_blank" rel="noopener">DEVELOPER_EMAIL=catalpaflat@outlook.com</a></p>
<p>PROJ_NAME=xxx<br>PROJ_GROUP=com.github.catalpaflat<br>PROJ_ARTIFACTID=xxx<br>PROJ_DESCRIPTION=xxx<br>PROJ_VERSION=1.0.0<br>PROJ_WEBSITEURL=<a href="https://github.com/CatalpaFlat/xxxx" target="_blank" rel="noopener">https://github.com/CatalpaFlat/xxxx</a><br>PROJ_ISSUETRACKERURL=<a href="https://github.com/CatalpaFlat/xxxx/issues" target="_blank" rel="noopener">https://github.com/CatalpaFlat/xxxx/issues</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2. local.properties.</span><br></pre></td></tr></table></figure></p>
<p>BINTRAY_USER=catalpaflat<br>BINTRAY_KEY=xxxxx</p>
<p>OSSRH_USER=xxx<br>OSSRH_PASSWORD=xxxxxxx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 3. bulid.gradle.   </span><br><span class="line"></span><br><span class="line">```gradle</span><br><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        //使用阿里的maven镜像</span><br><span class="line">        maven &#123; url &apos;http://maven.aliyun.com/nexus/content/groups/public&apos; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        //引入bintray插件</span><br><span class="line">        classpath &apos;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">group = PROJ_GROUP</span><br><span class="line">version = PROJ_VERSION</span><br><span class="line"></span><br><span class="line">apply plugin: &apos;maven&apos;</span><br><span class="line">apply plugin: &apos;java-library&apos;</span><br><span class="line">apply plugin: &apos;maven-publish&apos;</span><br><span class="line">apply plugin: &apos;com.jfrog.bintray&apos;</span><br><span class="line"></span><br><span class="line">apply plugin: &apos;idea&apos;</span><br><span class="line">apply plugin: &apos;java&apos;</span><br><span class="line"></span><br><span class="line">sourceCompatibility = 1.8</span><br><span class="line">targetCompatibility = 1.8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//生成源文件</span><br><span class="line">task sourcesJar(type: Jar, dependsOn: classes) &#123;</span><br><span class="line">    classifier = &apos;sources&apos;</span><br><span class="line">    from sourceSets.main.allSource</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//文档打包成jar</span><br><span class="line">task javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class="line">    classifier = &apos;javadoc&apos;</span><br><span class="line">    from javadoc.destinationDir</span><br><span class="line">&#125;</span><br><span class="line">//上传到JCenter所需要的源码文件</span><br><span class="line">artifacts &#123;</span><br><span class="line">    archives javadocJar</span><br><span class="line">    archives sourcesJar</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">def pomConfig = &#123;</span><br><span class="line">    licenses &#123;</span><br><span class="line">        license &#123;</span><br><span class="line">            //开源协议</span><br><span class="line">            name &apos;The Apache Software License, Version 2.0&apos;</span><br><span class="line">            url &apos;http://www.apache.org/licenses/LICENSE-2.0.txt&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    developers &#123;</span><br><span class="line">        developer &#123;</span><br><span class="line">            //开发者的个人信息</span><br><span class="line">            id &apos;CatalpaFlat&apos;</span><br><span class="line">            name &apos;CatalpaFlat&apos;</span><br><span class="line">            email &quot;catalpaflat@outlook.com&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    scm &#123;</span><br><span class="line">        connection &quot;https://github.com/CatalpaFlat/xxxx.git&quot;</span><br><span class="line">        developerConnection &quot;https://github.com/CatalpaFlat/xxxx.git&quot;</span><br><span class="line">        //项目网站</span><br><span class="line">        url &quot;https://github.com/CatalpaFlat/xxxx&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publishing &#123;</span><br><span class="line">    publications &#123;</span><br><span class="line">        MyPublication(MavenPublication) &#123;</span><br><span class="line">            from components.java</span><br><span class="line">            artifact sourcesJar</span><br><span class="line">            artifact javadocJar</span><br><span class="line">            groupId &apos;com.github.catalpaflat&apos;</span><br><span class="line">            artifactId &apos;SMS-modularization&apos;</span><br><span class="line">            version &apos;1.0.1&apos;</span><br><span class="line">            pom.withXml &#123;</span><br><span class="line">                def root = asNode()</span><br><span class="line">                root.appendNode(&apos;description&apos;, &apos;XXXX&apos;)</span><br><span class="line">                root.appendNode(&apos;name&apos;, &apos;XXXX&apos;)</span><br><span class="line">                root.appendNode(&apos;url&apos;, &apos;https://github.com/CatalpaFlat/xxxx&apos;)</span><br><span class="line">                root.children().last() + pomConfig</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">task writeNewPom &lt;&lt; &#123;</span><br><span class="line">    pom &#123;</span><br><span class="line">        project &#123;</span><br><span class="line">            inceptionYear &apos;2018&apos;</span><br><span class="line">            licenses &#123;</span><br><span class="line">                license &#123;</span><br><span class="line">                    name &apos;The Apache Software License, Version 2.0&apos;</span><br><span class="line">                    url &apos;http://www.apache.org/licenses/LICENSE-2.0.txt&apos;</span><br><span class="line">                    distribution &apos;repo&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            developers &#123;</span><br><span class="line">                developer &#123;</span><br><span class="line">                    //开发者的个人信息</span><br><span class="line">                    id &apos;CatalpaFlat&apos;</span><br><span class="line">                    name &apos;CatalpaFlat&apos;</span><br><span class="line">                    email &quot;catalpaflat@outlook.com&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            scm &#123;</span><br><span class="line">                connection &quot;https://github.com/CatalpaFlat/xxxx.git&quot;</span><br><span class="line">                developerConnection &quot;https://github.com/CatalpaFlat/xxxx.git&quot;</span><br><span class="line">                //项目网站</span><br><span class="line">                url &quot;https://github.com/CatalpaFlat/xxxx&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.writeTo(&quot;pom.xml&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bintray &#123;</span><br><span class="line"></span><br><span class="line">    Properties properties = new Properties()</span><br><span class="line">    properties.load(project.rootProject.file(&apos;local.properties&apos;).newDataInputStream())</span><br><span class="line">    user = properties.getProperty(&apos;BINTRAY_USER&apos;)</span><br><span class="line">    key = properties.getProperty(&apos;BINTRAY_KEY&apos;)</span><br><span class="line">    configurations = [&apos;archives&apos;]</span><br><span class="line">    publications = [&apos;xxxx&apos;]</span><br><span class="line"></span><br><span class="line">    dryRun = false</span><br><span class="line">    publish = true</span><br><span class="line"></span><br><span class="line">    pkg &#123;</span><br><span class="line">        repo = &apos;maven&apos;</span><br><span class="line">        name = PROJ_NAME</span><br><span class="line">        licenses = [&apos;Apache-2.0&apos;]</span><br><span class="line">        vcsUrl = &apos;https://github.com/CatalpaFlat/xxx.git&apos;</span><br><span class="line">        websiteUrl = &apos;https://github.com/CatalpaFlat/xxx&apos;</span><br><span class="line">        issueTrackerUrl = PROJ_ISSUETRACKERURL</span><br><span class="line">        labels = [&apos;java&apos;, &apos;spring&apos;, &apos;example&apos;]</span><br><span class="line">        version &#123;</span><br><span class="line">            name = PROJ_VERSION</span><br><span class="line">            desc = PROJ_DESCRIPTION</span><br><span class="line">            released = new Date()</span><br><span class="line">            vcsTag = PROJ_VERSION</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="9-release"><a href="#9-release" class="headerlink" title="9. release"></a>9. release</h2><p>1.执行gradle命令进行发布：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew bintrayUpload</span><br></pre></td></tr></table></figure>
<p>2.让我们回到Bintray上之前创建的maven仓库，这时你能在仓库的页面看到你刚才上传的包了，类似下图：</p>
<p><img src="img/WechatIMG16.jpeg" alt="">.    </p>
<p>3.点击包名，跳转后，在页面的右侧你会找到 Add to JCenter 的按钮，点击它继续跳转.  </p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-68f2f3ffd84f3338.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="">.     </p>
<p>你可以填写一些信息，也可以直接点击Send，过一段时间，系统会发送邮件提示你申请已经通过。   </p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-659a224e69c8a44e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="">.  </p>
<p>4.再回到刚才包的页面，点击 Maven Central，输入你的Sonatype的Token信息点击Sync，就可以完成同步了。第一次同步成功后，Sonatype也会通过邮件告知你 。 </p>
<p><img src="https://upload-images.jianshu.io/upload_images/4675459-ba18abc6ded76889.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt=""></p>
<blockquote>
<p>注：<br>以后再发布新版本的时候直接执行Gradle命令就行了。同步完成后可以马上在 <a href="https://oss.sonatype.org" target="_blank" rel="noopener">https://oss.sonatype.org</a> 进行搜索，但是 <a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a> 的搜索并不是实时的，需要等待一段时间，通常搜索结果第二天就能更新。</p>
</blockquote>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/03/23/JavaEE 使用Gradle发布jar包到远程中央仓库/" data-id="cjfb3thd7000erk5lqve4csjp" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-JavaEE 使用Maven发布jar包到远程中央仓库" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/23/JavaEE 使用Maven发布jar包到远程中央仓库/">JavaEE 使用Maven发布jar包到远程中央仓库</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/23/JavaEE 使用Maven发布jar包到远程中央仓库/">
            <time datetime="2018-03-23T07:00:56.000Z" itemprop="datePublished">2018-03-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/JavaEE/">JavaEE</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JavaEE/">JavaEE</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="JavaEE-使用Maven发布jar包到远程中央仓库"><a href="#JavaEE-使用Maven发布jar包到远程中央仓库" class="headerlink" title="JavaEE 使用Maven发布jar包到远程中央仓库"></a>JavaEE 使用Maven发布jar包到远程中央仓库</h1><h3 id="0-前提准备"><a href="#0-前提准备" class="headerlink" title="0. 前提准备"></a>0. 前提准备</h3><p><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 上 New Repository 项目<br>（若没有则注册）. </p>
<p><img src="img/WechatIMG4.jpeg" alt=""></p>
<h3 id="1-Sonatype-OSSRH-简介"><a href="#1-Sonatype-OSSRH-简介" class="headerlink" title="1. Sonatype OSSRH 简介"></a>1. Sonatype OSSRH 简介</h3><p>Sonatype OSSRH 使用Nexus 为开源项目提供仓库管理服务，该仓库就是所谓maven的中央仓库，OSSRH允许我们向Maven中央仓库提交二进制文件。<br>使用Sonatype OSSRH可以做以下操作：  </p>
<ul>
<li>提交(deploy)开发版本的二进制文件（snapshorts)</li>
<li>阶段性的发布版本</li>
<li>发布一个release,同步到Sonatype OSSRH 中央仓库。</li>
</ul>
<p>总共就两种版本：snapshorts版本（开发版本）和release（发布版本）</p>
<h3 id="2-注册JIRA账号"><a href="#2-注册JIRA账号" class="headerlink" title="2. 注册JIRA账号"></a>2. 注册JIRA账号</h3><p><a href="https://issues.sonatype.org/secure/Dashboard.jspa" target="_blank" rel="noopener">注册链接</a><br>注册之后请妥善保管好账号密码，后续登录相关Nexus链接需要用到。</p>
<h3 id="3-创建issue"><a href="#3-创建issue" class="headerlink" title="3. 创建issue"></a>3. 创建issue</h3><p>注册完之后创建ISSUE<br><img src="img/WechatIMG32.jpeg" alt=""></p>
<blockquote>
<p><strong>注：</strong> 当创建完之后，issue的status为open状态，此时还不能进行上传jar，若group id为com.github开头的话，基本秒过（管理员审核较快，即从OPEN -&gt; RESOLVED）,当为RESOLVED时，即上传jar。</p>
<p>当ISSUA转为RESOLVED时，会有附带相关链接,其中只需记录这两个链接：   </p>
<ul>
<li>Deploy snapshot artifacts into repository</li>
<li>Deploy release artifacts into the staging repository</li>
</ul>
<p>后续配置项目pom.xml时需要</p>
</blockquote>
<p><img src="img/WechatIMG12.jpeg" alt=""></p>
<h3 id="4-下载GPG"><a href="#4-下载GPG" class="headerlink" title="4. 下载GPG"></a>4. 下载GPG</h3><p>1.下载安装。 </p>
<p>(1) Mac操作系统：  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gnupg</span><br></pre></td></tr></table></figure>
<p>(2) Windows操作系统<br>下载地址：<a href="https://www.gpg4win.org/" target="_blank" rel="noopener">https://www.gpg4win.org/</a></p>
<p>2.校验  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --version</span><br></pre></td></tr></table></figure>
<p><img src="img/WechatIMG5.jpeg" alt=""></p>
<h3 id="5-配置GPG生成对称签名"><a href="#5-配置GPG生成对称签名" class="headerlink" title="5. 配置GPG生成对称签名"></a>5. 配置GPG生成对称签名</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-key</span><br></pre></td></tr></table></figure>
<p>1.输入姓名和邮箱<br><img src="img/WechatIMG7.jpeg" alt=""><br>2.输入passphrase密码<br><img src="img/WechatIMG8.jpeg" alt=""><br>3.记住密钥，用于上传<br><img src="img/WechatIMG9.jpeg" alt="">   </p>
<h3 id="6-上传GPG签名"><a href="#6-上传GPG签名" class="headerlink" title="6. 上传GPG签名"></a>6. 上传GPG签名</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">gpg --keyserver hkp://keys.gnupg.net --send-keys 上图圈出来的密钥</span><br><span class="line">```    </span><br><span class="line">![](img/WechatIMG11.jpeg)   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>## 7. IDEA 创建maven项目</span><br><span class="line">此处无图</span><br><span class="line"><span class="meta">#</span>## 8. 配置maven下config的setting.xml</span><br><span class="line">配置JIRA账号，用于发布snapshorts版本。   </span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;server&gt;</span><br><span class="line">    &lt;id&gt;sonatype-nexus-snapshots&lt;/id&gt;</span><br><span class="line">    &lt;username&gt; account &lt;/username&gt;</span><br><span class="line">    &lt;password&gt; password &lt;/password&gt;</span><br><span class="line">&lt;/server&gt;</span><br><span class="line">&lt;server&gt;</span><br><span class="line">    &lt;id&gt;sonatype-nexus-staging&lt;/id&gt;</span><br><span class="line">    &lt;username&gt; account &lt;/username&gt;</span><br><span class="line">    &lt;password&gt; password d&lt;/password&gt;</span><br><span class="line">&lt;/server&gt;</span><br><span class="line">&lt;/servers&gt;</span><br></pre></td></tr></table></figure>
<h3 id="9-配置项目pom-xml"><a href="#9-配置项目pom-xml" class="headerlink" title="9.配置项目pom.xml"></a>9.配置项目pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.youname<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>XXXX<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 若发布snapshorts版本，则需添加版本后缀 '-SNAPSHOT' --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- org.sonatype.oss依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sonatype.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>oss-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- 默认许可证 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Apache 2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.apache.org/licenses/LICENSE-2.0.txt<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">distribution</span>&gt;</span>repo<span class="tag">&lt;/<span class="name">distribution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">comments</span>&gt;</span>A business-friendly OSS license<span class="tag">&lt;/<span class="name">comments</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- GitHub项目地址 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://github.com/CatalpaFlat/XXX<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>&gt;</span>https://github.com/CatalpaFlat/XXX.git<span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 开源项目作者信息 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>CatalpaFlat<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">email</span>&gt;</span>youemail<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://github.com/CatalpaFlat/XXX<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">developer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 部署release版本要用到 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sonatype.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nexus-staging-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">serverId</span>&gt;</span>ossrh<span class="tag">&lt;/<span class="name">serverId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">nexusUrl</span>&gt;</span>https://oss.sonatype.org/<span class="tag">&lt;/<span class="name">nexusUrl</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">autoReleaseAfterClose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">autoReleaseAfterClose</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-release-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">autoVersionSubmodules</span>&gt;</span>true<span class="tag">&lt;/<span class="name">autoVersionSubmodules</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">useReleaseProfile</span>&gt;</span>false<span class="tag">&lt;/<span class="name">useReleaseProfile</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">releaseProfiles</span>&gt;</span>release<span class="tag">&lt;/<span class="name">releaseProfiles</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span>deploy<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-gpg-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">id</span>&gt;</span>sign-artifacts<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>sign<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-sources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-javadocs<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 这个id需要在setting.xml中设置对应  --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span>OSS Snapshots Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 这里的url就是Issue中回复的snapshots 的repo地址--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-nexus-staging<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">name</span>&gt;</span>OSS Staging Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 这里的url就是Issue中回复的staging 的repo地址--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://oss.sonatype.org/service/local/staging/deploy/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-发布snapshorts版本"><a href="#10-发布snapshorts版本" class="headerlink" title="10. 发布snapshorts版本"></a>10. 发布snapshorts版本</h3><p>修改version加一个-SNAPSHOT.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean deploy</span><br></pre></td></tr></table></figure>
<h3 id="11-发布release版本"><a href="#11-发布release版本" class="headerlink" title="11. 发布release版本"></a>11. 发布release版本</h3><p>修改version 不要加-SNAPSHOT.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean deploy -P release</span><br></pre></td></tr></table></figure>
<h3 id="12-close-项目-release-项目"><a href="#12-close-项目-release-项目" class="headerlink" title="12. close 项目/release 项目"></a>12. close 项目/release 项目</h3><p>使用注册的账号登录:<br><a href="https://oss.sonatype.org" target="_blank" rel="noopener">Nexus Repository Manager</a><br><img src="img/WechatIMG13.jpeg" alt="">   </p>
<blockquote>
<p><strong>注：</strong>查看自己的(你定义的版本号不能带SNAPSHOT要不然看不到)<br>a）构件准备好之后，在命令行上传构建；<br>b）在<a href="https://oss.sonatype.org/" target="_blank" rel="noopener">https://oss.sonatype.org/</a> 先“close”后“release”构件；<br>c) 等待同步好（大约2小时多）之后，就可以使用了。   </p>
</blockquote>
<h3 id="13-设置上传中央仓库"><a href="#13-设置上传中央仓库" class="headerlink" title="13. 设置上传中央仓库"></a>13. 设置上传中央仓库</h3><p>Already Synced to Central设置为Yes<br><img src="img/WechatIMG14.jpeg" alt="">   </p>
<h3 id="14-查询发布结果"><a href="#14-查询发布结果" class="headerlink" title="14. 查询发布结果"></a>14. 查询发布结果</h3><p><a href="https://search.maven.org" target="_blank" rel="noopener">Central Repositiry</a><br><img src="img/WechatIMG15.jpeg" alt="">    </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/03/23/JavaEE 使用Maven发布jar包到远程中央仓库/" data-id="cjfb3thd5000crk5lhk2ul0sf" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-JavaEE 发布jar包到远程maven中央仓库" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/03/22/JavaEE 发布jar包到远程maven中央仓库/">JavaEE 发布jar包到远程maven中央仓库</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/22/JavaEE 发布jar包到远程maven中央仓库/">
            <time datetime="2018-03-22T03:33:56.000Z" itemprop="datePublished">2018-03-22</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/JavaEE/">JavaEE</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JavaEE/">JavaEE</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="JavaEE-发布jar包到远程maven中央仓库"><a href="#JavaEE-发布jar包到远程maven中央仓库" class="headerlink" title="JavaEE 发布jar包到远程maven中央仓库"></a>JavaEE 发布jar包到远程maven中央仓库</h1><blockquote>
<p>当项目成熟到一定阶段时，需要将相关业务模块抽离封装迭代管理时，可以将业务相关内容模块化，并将其打包到对应远程仓库，以此提高下次开发效率与成本。<br>其中，JavaEE就有两种打包方法：</p>
<ul>
<li>maven ——Nexus仓库</li>
<li>gradle —— JCenter仓库</li>
</ul>
<p>两者都可以将jar提交到远程仓库中。</p>
</blockquote>
<h2 id="一-Maven方法"><a href="#一-Maven方法" class="headerlink" title="一.Maven方法"></a>一.Maven方法</h2><blockquote>
<p>使用<strong>Sonatype OSSRH</strong> 将 开源项目的jar 交给Maven的中央仓库。</p>
<ul>
<li>Nexus Repository Manager: <a href="https://oss.sonatype.org" target="_blank" rel="noopener">https://oss.sonatype.org</a>  </li>
<li>Sonatype: <a href="https://issues.sonatype.org" target="_blank" rel="noopener">https://issues.sonatype.org</a></li>
<li>Central Repositiry: <a href="https://search.maven.org" target="_blank" rel="noopener">https://search.maven.org</a></li>
</ul>
<p>简要步骤：  </p>
<ol>
<li>GitHub 上创建对应开源项目Repository</li>
<li>注册JIRA账号 — 远程maven仓库账号</li>
<li>创建issue — 其中关联GitHub项目链接</li>
<li>下载GPG（用于签名）</li>
<li>配置GPG对称签名 ——Remember passphrase/Remember the User Id（密钥）</li>
<li>上传GPG签名（发布Release版本关键）</li>
<li>IDEA 创建maven项目</li>
<li>配置maven下config的setting.xml（snapshorts版本关键）</li>
<li>配置项目pom.xml</li>
<li>发布snapshorts版本</li>
<li>发布release版本</li>
<li>close 项目</li>
<li>release 项目</li>
<li>设置上传中央仓库</li>
</ol>
</blockquote>
<h3 id="Integral-flow-chart"><a href="#Integral-flow-chart" class="headerlink" title="Integral flow chart"></a>Integral flow chart</h3><p><img src="img/mavenIntegral flow chart.png" alt="Maven Integral flow chart"></p>
<h3 id="The-specific-implementation"><a href="#The-specific-implementation" class="headerlink" title="The specific implementation"></a>The specific implementation</h3><p>JavaEE 使用Maven发布jar包到远程中央仓库</p>
<h2 id="二-Gradle方法"><a href="#二-Gradle方法" class="headerlink" title="二.Gradle方法"></a>二.Gradle方法</h2><blockquote>
<p>使用<strong> Bintray </strong>  将 开源项目的jar 交给Maven的中央仓库。   </p>
<ul>
<li>Bintray: https:/bintray.com</li>
<li>Sonatype: <a href="https://issues.sonatype.org" target="_blank" rel="noopener">https://issues.sonatype.org</a></li>
</ul>
<p>简要步骤：  </p>
<ol>
<li>创建Bintray账号</li>
<li>Bintray上创建maven仓库</li>
<li>获取BINTRAY_KEY </li>
<li>注册JIRA账号 — 远程maven仓库账号</li>
<li>创建issue — 其中关联GitHub项目链接</li>
<li>GPG签名 - 配置到Bintray</li>
<li>获取OSSRH_TOKEN信息（关联issue的凭证） - 配置bulid.gradle和后续Release</li>
<li>IDEA 创建Gradle项目</li>
<li>配置项目bulid.gradle - 关联issue/关联Bintray</li>
<li>发布部署</li>
</ol>
</blockquote>
<h3 id="Integral-flow-chart-1"><a href="#Integral-flow-chart-1" class="headerlink" title="Integral flow chart"></a>Integral flow chart</h3><p><img src="img/gradleIntegral flow chart.png" alt="Gradle Integral flow chart"></p>
<h3 id="The-specific-implementation-1"><a href="#The-specific-implementation-1" class="headerlink" title="The specific implementation"></a>The specific implementation</h3><p>JavaEE 使用Gradle发布jar包到远程中央仓库</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/03/22/JavaEE 发布jar包到远程maven中央仓库/" data-id="cjfb3thd10007rk5l435slhx6" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Java开发规范" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/01/23/Java开发规范/">Java 编码规范</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/01/23/Java开发规范/">
            <time datetime="2018-01-23T05:20:56.000Z" itemprop="datePublished">2018-01-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Java/">Java</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Java/">Java</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="Java-编码规范"><a href="#Java-编码规范" class="headerlink" title="Java 编码规范"></a>Java 编码规范</h1><blockquote>
<p>编写时间：2018.01.20<br>编写人：CatalpaFlat</p>
</blockquote>
<h2 id="第1章-序言"><a href="#第1章-序言" class="headerlink" title="第1章    序言"></a>第1章    序言</h2><p>&emsp;&emsp;本规范的目的在于：建立一个可行可操作的编程标准、约定和指南，以规范公司java代码研发工作。<br>&emsp;&emsp;为了提高公司研发能力，该规范的制定是为了规范java代码开发，提高java开发质量，从代码的层面规范并提高java项目的研发水平。该规范由Java技术小组制定，组织技术人员对重点项目以及新的java项目定期检查，对代码质量进行评估，对代码质量较差限期整改，并报Java技术小组组长备案作为项目考核依据。<br>&emsp;&emsp;本规范的内容包括两个方面：编程规约、异常日志、单元测试、安全规约、工程结构、MySQL数据库六个维度。再根据内容特征，细分成若干二级子目录。<br>&emsp;&emsp;为了开发者针对违规代码进行调整，根据约束力强弱及故障敏感性：  </p>
<ul>
<li>规约级别：强制、推荐、参考三大类；<ul>
<li>“说明”：对内容做了适当扩展和解释，对于规约条目的延伸信息中；</li>
<li>“正例”：提倡什么样的编码和实现方式；</li>
<li>“反例”：说明需要提防的雷区，以及真实的错误案例。  </li>
</ul>
</li>
</ul>
<p>&emsp;&emsp;本规范解释权归Java技术小组，属于Java技术小组为了提供公司研发水平以及质量的一系列措施中的一部分，在后续的版本中将根据具体需要进行修改以及调整。技术小组审核后给出相应的整改意见，对于有争议的问题，可直接与Java技术小组组长沟通。   </p>
<h2 id="第2章-编程规约"><a href="#第2章-编程规约" class="headerlink" title="第2章    编程规约"></a>第2章    编程规约</h2><h3 id="2-1-命名规范"><a href="#2-1-命名规范" class="headerlink" title="2.1    命名规范"></a>2.1    命名规范</h3><p>1.【强制】代码中的命名均不能以下划线或美元符号开始，也不能以下划线或美元符号结束。<br>&emsp;反例：<em>name/__name/$Object/name</em>/name$/Object$<br>2.【强制】代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。<br>&emsp;说明：正确的英文拼写和语法可以让阅读者易于理解，避免歧义。注意，即使纯拼音命名方式也要避免采用。<br>&emsp;正例：alibaba / taobao / youku / hangzhou 等国际通用的名称，可视同英文。<br>&emsp;反例：DaZhePromotion [打折] / getPingfenByName() [评分] / int 某变量 = 3<br>3.【强制】类名使用UpperCamelCase风格，必须遵从驼峰形式，但以下情形例外：DO / BO / DTO / VO / AO / TO<br>&emsp;正例：MarcoPolo / UserDO / XmlService / TcpUdpDeal / TaPromotion<br>&emsp;反例：macroPolo / UserDo / XMLService / TCPUDPDeal / TAPromotion<br>4.【强制】方法名、参数名、成员变量、局部变量都统一使用lowerCamelCase风格，必须遵从驼峰形式。<br>&emsp;正例： localValue / getHttpMessage() / inputUserId<br>5.【强制】常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。<br>&emsp;正例：MAX_STOCK_COUNT<br>&emsp;反例：MAX_COUNT<br>6.【强制】抽象类命名使用Abstract或Base开头；异常类命名使用Exception结尾；测试类命名以它要测试的类的名称开始，以Test结尾。<br>7.【强制】中括号是数组类型的一部分，<br>&emsp;正例：数组定义如下：String[] args;<br>&emsp;反例：使用String args[]的方式来定义。<br>8.【强制】POJO类中布尔类型的变量，都不要加is，否则部分框架解析会引起序列化错误。<br>&emsp;反例：定义为基本数据类型Boolean isDeleted；的属性，它的方法也是isDeleted()，RPC框架在反向解析的时候，“以为”对应的属性名称是deleted，导致属性获取不到，进而抛出异常。<br>9.【强制】包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。<br>&emsp;正例： 应用工具类包名为com.alibaba.open.util、类名为MessageUtils（此规则参考spring的框架结构）<br>10.【强制】杜绝完全不规范的缩写，避免望文不知义。<br>&emsp;反例：AbstractClass“缩写”命名成AbsClass；condition“缩写”命名成 condi，此类随意缩写严重降低了代码的可阅读性。<br>11.【推荐】为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达其意。<br>&emsp;正例：从远程仓库拉取代码的类命名为PullCodeFromRemoteRepository。<br>&emsp;反例：变量int a; 的随意命名方式。<br>12.【推荐】如果模块、接口、类、方法使用了设计模式，在命名时体现出具体模式。<br>&emsp;说明：将设计模式体现在名字中，有利于阅读者快速理解架构设计理念。<br>&emsp;正例：public class OrderFactory; public class LoginProxy; public class ResourceObserver;<br>13.【推荐】接口类中的方法和属性不要加任何修饰符号（public 也不要加），保持代码的简洁性，并加上有效的Javadoc注释。尽量不要在接口里定义变量，如果一定要定义变量，肯定是与接口方法相关，并且是整个应用的基础常量。<br>&emsp;正例：接口方法签名：void f(); 接口基础常量表示：String COMPANY = “alibaba”;<br>&emsp;反例：接口方法定义：public abstract void f();<br>&emsp;说明：JDK8中接口允许有默认实现，那么这个default方法，是对所有实现类都有价值的默认实现。<br>14.接口和实现类的命名有两套规则：<br> &emsp;1）【强制】对于Service和DAO类，基于SOA的理念，暴露出来的服务一定是接口，内部的实现类用Impl的后缀与接口区别。<br>&emsp;&emsp;正例：CacheServiceImpl实现CacheService接口。<br>&emsp; 2）【推荐】如果是形容能力的接口名称，取对应的形容词做接口名（通常是–able的形式）。<br>&emsp;&emsp;正例：AbstractTranslator实现 Translatable。<br>15.【参考】枚举类名建议带上Enum后缀，枚举成员名称需要全大写，单词间用下划线隔开。<br>&emsp;说明：枚举其实就是特殊的常量类，且构造方法被默认强制是私有。<br>&emsp;正例：枚举名字为ProcessStatusEnum的成员名称：SUCCESS / UNKOWN_REASON。<br>16.【参考】各层命名规约：<br>&emsp;A) Service/DAO层方法命名规约:<br>&emsp;&emsp;1） 获取单个对象的方法用get做前缀。<br>&emsp;&emsp;2） 获取多个对象的方法用list做前缀。<br>&emsp;&emsp;3） 获取统计值的方法用count做前缀。<br>&emsp;&emsp;4） 插入的方法用save/insert做前缀。<br>&emsp;&emsp;5） 删除的方法用remove/delete做前缀。<br>&emsp;&emsp;6） 修改的方法用update做前缀。<br>&emsp;B) 领域模型命名规约:<br>&emsp;&emsp;1） 数据对象：xxxDO，xxx即为数据表名。<br>&emsp;&emsp;2） 数据传输对象：xxxDTO，xxx为业务领域相关的名称。<br>&emsp;&emsp;3） 展示对象：xxxVO，xxx一般为网页名称。<br>&emsp;&emsp;4） POJO是DO/DTO/BO/VO的统称，禁止命名成xxxPOJO。  </p>
<h3 id="2-2-常量定义"><a href="#2-2-常量定义" class="headerlink" title="2.2    常量定义"></a>2.2    常量定义</h3><p>1.【强制】不允许任何魔法值（即未经定义的常量）直接出现在代码中。<br>&emsp;反例：String key = “Id#taobao_” + tradeId; cache.put(key, value);<br>2.【强制】long或者Long初始赋值时，使用大写的L，不能是小写的l，小写容易跟数字1混淆，造成误解。<br>&emsp;说明：Long a = 2l; 写的是数字的21，还是Long型的2?<br>3.【推荐】不要使用一个常量类维护所有常量，按常量功能进行归类，分开维护。<br>&emsp;说明：大而全的常量类，非得使用查找功能才能定位到修改的常量，不利于理解和维护。<br>&emsp;正例：缓存相关常量放在类CacheConsts下；系统配置相关常量放在类ConfigConsts下。<br>4.【推荐】常量的复用层次有五层：跨应用共享常量、应用内共享常量、子工程内共享常量、包内共享常量、类内共享常量。<br>&emsp;1） 跨应用共享常量：放置在二方库中，通常是client.jar中的constant目录下。<br>&emsp;2） 应用内共享常量：放置在一方库中，通常是modules中的constant目录下。<br>&emsp;反例：易懂变量也要统一定义成应用内共享常量，两位攻城师在两个类中分别定义了表示“是”的变量：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//类A中：</span><br><span class="line">public static final String YES = &quot;yes&quot;;</span><br><span class="line">//类B中：</span><br><span class="line">public static final String YES = &quot;y&quot;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">		A.YES.equals(B.YES);//预期是true，但实际返回为false，导致线上问题。  </span><br><span class="line">```   </span><br><span class="line"></span><br><span class="line">&amp;emsp;3） 子工程内部共享常量：即在当前子工程的constant目录下。  </span><br><span class="line">&amp;emsp;4） 包内共享常量：即在当前包下单独的constant目录下。  </span><br><span class="line">&amp;emsp;5） 类内共享常量：直接在类内部private static final定义。  </span><br><span class="line"></span><br><span class="line">5.【推荐】如果变量值仅在一个范围内变化，且带有名称之外的延伸属性，定义为枚举类。下面正例中的数字就是延伸信息，表示星期几。  </span><br><span class="line">正例：</span><br></pre></td></tr></table></figure>
<pre><code>public Enum {
    MONDAY(1),
    TUESDAY(2),
    WEDNESDAY(3),
    THURSDAY(4),
    FRIDAY(5),
    SATURDAY(6),
    SUNDAY(7);
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.3	代码格式</span><br><span class="line">1.【强制】大括号的使用约定。如果是大括号内为空，则简洁地写成&#123;&#125;即可，不需要换行；如果是非空代码块则：  </span><br><span class="line">&amp;emsp;1） 左大括号前不换行。  </span><br><span class="line">&amp;emsp;2） 左大括号后换行。  </span><br><span class="line">&amp;emsp;3） 右大括号前换行。  </span><br><span class="line">&amp;emsp;4） 右大括号后还有else等代码则不换行；表示终止的右大括号后必须换行。   </span><br><span class="line">2.【强制】 左小括号和字符之间不出现空格；同样，右小括号和字符之间也不出现空格。详见第5条下方正例提示。  </span><br><span class="line">&amp;emsp;反例：if (空格a == b空格)  </span><br><span class="line">3.【强制】if/for/while/switch/do等保留字与括号之间都必须加空格。  </span><br><span class="line">4.【强制】任何二目、三目运算符的左右两边都需要加一个空格。   </span><br><span class="line">&amp;emsp;说明：运算符包括赋值运算符=、逻辑运算符&amp;&amp;、加减乘除符号等。   </span><br><span class="line">5.【强制】采用4个空格缩进，禁止使用tab字符。  </span><br><span class="line">&amp;emsp;说明：如果使用tab缩进，必须设置1个tab为4个空格。IDEA设置tab为4个空格时，请勿勾选Use tab character；而在eclipse中，必须勾选insert spaces for tabs。    </span><br><span class="line">&amp;emsp;正例： （涉及1-5点）</span><br></pre></td></tr></table></figure>
<pre><code>public static void main(String[] args) {
    // 缩进4个空格
    String say = &quot;hello&quot;;
    // 运算符的左右必须有一个空格
    int flag = 0;
    // 关键词if与括号之间必须有一个空格，括号内的f与左括号，0与右括号不需要空格
    if (flag == 0) {
      System.out.println(say);
    }
    // 左大括号前加空格且不换行；左大括号后换行
    if (flag == 1) {
      System.out.println(&quot;world&quot;);
      // 右大括号前换行，右大括号后有else，不用换行
    } else {
      System.out.println(&quot;ok&quot;);
      // 在右大括号后直接结束，则必须换行
    }
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">6.【强制】注释的双斜线与注释内容之间有且仅有一个空格。    </span><br><span class="line">&amp;emsp;正例：// 注释内容，注意在//和注释内容之间有一个空格。  </span><br><span class="line">7.【强制】单行字符数限制不超过120个，超出需要换行，换行时遵循如下原则：    </span><br><span class="line">&amp;emsp;1） 第二行相对第一行缩进4个空格，从第三行开始，不再继续缩进，参考示例。    </span><br><span class="line">&amp;emsp;2） 运算符与下文一起换行。  </span><br><span class="line">&amp;emsp;3） 方法调用的点符号与下文一起换行。  </span><br><span class="line">&amp;emsp;4） 方法调用时，多个参数，需要换行时，在逗号后进行。  </span><br><span class="line">&amp;emsp;5） 在括号前不要换行，见反例。  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure>
<pre><code>StringBuffer sb = new StringBuffer();
// 超过120个字符的情况下，换行缩进4个空格，点号和方法名称一起换行
sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...
.append(&quot;huang&quot;)...
.append(&quot;huang&quot;)...
.append(&quot;huang&quot;);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;emsp;反例：</span><br></pre></td></tr></table></figure>
<pre><code>StringBuffer sb = new StringBuffer();
// 超过120个字符的情况下，不要在括号前换行
sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...append
(&quot;huang&quot;);
// 参数很多的方法调用可能超过120个字符，不要在逗号前换行
method(args1, args2, args3, ...
, argsX);  
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8.【强制】方法参数在定义和传入时，多个参数逗号后边必须加空格。  </span><br><span class="line">&amp;emsp;正例：下例中实参的&quot;a&quot;,后边必须要有一个空格。</span><br></pre></td></tr></table></figure>
<pre><code>method(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9.【强制】IDE的text file encoding设置为UTF-8; IDE中文件的换行符使用Unix格式，不要使用Windows格式。  </span><br><span class="line">10.【推荐】没有必要增加若干空格来使某一行的字符与上一行对应位置的字符对齐。  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure>
<pre><code>int a = 3;
long b = 4L;
float c = 5F;
StringBuffer sb = new StringBuffer();
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&amp;emsp;说明：增加sb这个变量，如果需要对齐，则给a、b、c都要增加几个空格，在变量比较多的情况下，是一种累赘的事情。  </span><br><span class="line">11.【推荐】方法体内的执行语句组、变量的定义语句组、不同的业务逻辑之间或者不同的语义之间插入一个空行。相同业务逻辑和语义之间不需要插入空行。  </span><br><span class="line">&amp;emsp;说明：没有必要插入多个空行进行隔开。      </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.4	OOP规约</span><br><span class="line">1.【强制】避免通过一个类的对象引用访问此类的静态变量或静态方法，无谓增加编译器解析成本，直接用类名来访问即可。    </span><br><span class="line">2.【强制】所有的覆写方法，必须加@Override注解。  </span><br><span class="line">&amp;emsp;说明：getObject()与get0bject()的问题。一个是字母的O，一个是数字的0，加@Override可以准确判断是否覆盖成功。另外，如果在抽象类中对方法签名进行修改，其实现类会马上编译报错。  </span><br><span class="line">3.【强制】相同参数类型，相同业务含义，才可以使用Java的可变参数，避免使用Object。  </span><br><span class="line">&amp;emsp;说明：可变参数必须放置在参数列表的最后。（提倡同学们尽量不用可变参数编程）  </span><br><span class="line">正例：</span><br></pre></td></tr></table></figure>
<pre><code>public User getUsers(String type, Integer... ids) {...}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4.【强制】外部正在调用或者二方库依赖的接口，不允许修改方法签名，避免对接口调用方产生影响。接口过时必须加@Deprecated注解，并清晰地说明采用的新接口或者新服务是什么。    </span><br><span class="line">5.【强制】不能使用过时的类或方法。  </span><br><span class="line">&amp;emsp;说明：java.net.URLDecoder 中的方法decode(String encodeStr) 这个方法已经过时，应该使用双参数decode(String source, String encode)。接口提供方既然明确是过时接口，那么有义务同时提供新的接口；作为调用方来说，有义务去考证过时方法的新实现是什么。  </span><br><span class="line">6.【强制】Object的equals方法容易抛空指针异常，应使用常量或确定有值的对象来调用equals。  </span><br><span class="line">&amp;emsp;正例：&quot;test&quot;.equals(object);  </span><br><span class="line">&amp;emsp;反例：object.equals(&quot;test&quot;);  </span><br><span class="line">&amp;emsp;说明：推荐使用java.util.Objects#equals（JDK7引入的工具类）  </span><br><span class="line">7.【强制】所有的相同类型的包装类对象之间值的比较，全部使用equals方法比较。  </span><br><span class="line">&amp;emsp;说明：对于Integer var = ? 在-128至127范围内的赋值，Integer对象是在IntegerCache.cache产生，会复用已有对象，这个区间内的Integer值可以直接使用==进行判断，但是这个区间之外的所有数据，都会在堆上产生，并不会复用已有对象，这是一个大坑，推荐使用equals方法进行判断。  </span><br><span class="line">8.关于基本数据类型与包装数据类型的使用标准如下：  </span><br><span class="line">&amp;emsp;1） 【强制】所有的POJO类属性必须使用包装数据类型。  </span><br><span class="line">&amp;emsp;2） 【强制】RPC方法的返回值和参数必须使用包装数据类型。  </span><br><span class="line">&amp;emsp;3） 【推荐】所有的局部变量使用基本数据类型。  </span><br><span class="line">&amp;emsp;说明：POJO类属性没有初值是提醒使用者在需要使用时，必须自己显式地进行赋值，任何NPE问题，或者入库检查，都由使用者来保证。  </span><br><span class="line">&amp;emsp;正例：数据库的查询结果可能是null，因为自动拆箱，用基本数据类型接收有NPE风险。  </span><br><span class="line">&amp;emsp;反例：比如显示成交总额涨跌情况，即正负x%，x为基本数据类型，调用的RPC服务，调用不成功时，返回的是默认值，页面显示为0%，这是不合理的，应该显示成中划线。所以包装数据类型的null值，能够表示额外的信息，如：远程调用失败，异常退出。  </span><br><span class="line">9.【强制】定义DO/DTO/VO等POJO类时，不要设定任何属性默认值。  </span><br><span class="line">&amp;emsp;反例：POJO类的gmtCreate默认值为new Date();但是这个属性在数据提取时并没有置入具体值，在更新其它字段时又附带更新了此字段，导致创建时间被修改成当前时间。   </span><br><span class="line">10.【强制】序列化类新增属性时，请不要修改serialVersionUID字段，避免反序列失败；如果完全不兼容升级，避免反序列化混乱，那么请修改serialVersionUID值。  </span><br><span class="line">&amp;emsp;说明：注意serialVersionUID不一致会抛出序列化运行时异常。    </span><br><span class="line">11.【强制】构造方法里面禁止加入任何业务逻辑，如果有初始化逻辑，请放在init方法中。   </span><br><span class="line">12.【强制】POJO类必须写toString方法。使用IDE的中工具：source&gt; generate toString时，如果继承了另一个POJO类，注意在前面加一下super.toString。   </span><br><span class="line">&amp;emsp;说明：在方法执行抛出异常时，可以直接调用POJO的toString()方法打印其属性值，便于排查问题。  </span><br><span class="line">13.【推荐】使用索引访问用String的split方法得到的数组时，需做最后一个分隔符后有无内容的检查，否则会有抛IndexOutOfBoundsException的风险。   </span><br><span class="line">&amp;emsp;说明：</span><br></pre></td></tr></table></figure>
<pre><code>String str = &quot;a,b,c,,&quot;;
String[] ary = str.split(&quot;,&quot;);
// 预期大于3，结果是3
System.out.println(ary.length);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">14.【推荐】当一个类有多个构造方法，或者多个同名方法，这些方法应该按顺序放置在一起，便于阅读，此条规则优先于第15条规则。  </span><br><span class="line">15.【推荐】 类内方法定义顺序依次是：公有方法或保护方法 &gt; 私有方法 &gt; getter/setter方法。  </span><br><span class="line">&amp;emsp;说明：公有方法是类的调用者和维护者最关心的方法，首屏展示最好；保护方法虽然只是子类关心，也可能是“模板设计模式”下的核心方法；而私有方法外部一般不需要特别关心，是一个黑盒实现；因为承载的信息价值较低，所有Service和DAO的getter/setter方法放在类体最后。     </span><br><span class="line">16.【推荐】setter方法中，参数名称与类成员变量名称一致，this.成员名 = 参数名。在getter/setter方法中，不要增加业务逻辑，增加排查问题的难度。  </span><br><span class="line">&amp;emsp;反例：</span><br></pre></td></tr></table></figure>
<pre><code>public Integer getData() {
    if (true) {
        return this.data + 100;
    } else {
        return this.data - 100;
    }
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">17.【推荐】循环体内，字符串的连接方式，使用StringBuilder的append方法进行扩展。  </span><br><span class="line">&amp;emsp;说明：反编译出的字节码文件显示每次循环都会new出一个StringBuilder对象，然后进行append操作，最后通过toString方法返回String对象，造成内存资源浪费。   </span><br><span class="line">&amp;emsp;反例：</span><br></pre></td></tr></table></figure>
<pre><code>String str = &quot;start&quot;;
for (int i = 0; i &lt; 100; i++) {
str = str + &quot;hello&quot;;
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">18.【推荐】final可以声明类、成员变量、方法、以及本地变量，下列情况使用final关键字：  </span><br><span class="line">&amp;emsp;1） 不允许被继承的类，如：String类。  </span><br><span class="line">&amp;emsp;2） 不允许修改引用的域对象，如：POJO类的域变量。  </span><br><span class="line">&amp;emsp;3） 不允许被重写的方法，如：POJO类的setter方法。  </span><br><span class="line">&amp;emsp;4） 不允许运行过程中重新赋值的局部变量。  </span><br><span class="line">&amp;emsp;5） 避免上下文重复使用一个变量，使用final描述可以强制重新定义一个变量，方便更好地进行重构。   </span><br><span class="line">19.【推荐】慎用Object的clone方法来拷贝对象。  </span><br><span class="line">&amp;emsp;说明：对象的clone方法默认是浅拷贝，若想实现深拷贝需要重写clone方法实现属性对象的拷贝。   </span><br><span class="line">20.【推荐】类成员与方法访问控制从严：   </span><br><span class="line">&amp;emsp;1） 如果不允许外部直接通过new来创建对象，那么构造方法必须是private。  </span><br><span class="line">&amp;emsp;2） 工具类不允许有public或default构造方法。  </span><br><span class="line">&amp;emsp;3） 类非static成员变量并且与子类共享，必须是protected。  </span><br><span class="line">&amp;emsp;4） 类非static成员变量并且仅在本类使用，必须是private。  </span><br><span class="line">&amp;emsp;5） 类static成员变量如果仅在本类使用，必须是private。  </span><br><span class="line">&amp;emsp;6） 若是static成员变量，必须考虑是否为final。  </span><br><span class="line">&amp;emsp;7） 类成员方法只供类内部调用，必须是private。  </span><br><span class="line">&amp;emsp;8） 类成员方法只对继承类公开，那么限制为protected。  </span><br><span class="line">&amp;emsp;说明：任何类、方法、参数、变量，严控访问范围。过于宽泛的访问范围，不利于模块解耦。思考：如果是一个private的方法，想删除就删除，可是一个public的service方法，或者一个public的成员变量，删除一下，不得手心冒点汗吗？变量像自己的小孩，尽量在自己的视线内，变量作用域太大，无限制的到处跑，那么你会担心的。   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.5	集合规约  </span><br><span class="line">1.【强制】关于hashCode和equals的处理，遵循如下规则：  </span><br><span class="line">&amp;emsp;1） 只要重写equals，就必须重写hashCode。  </span><br><span class="line">&amp;emsp;2） 因为Set存储的是不重复的对象，依据hashCode和equals进行判断，所以Set存储的对象必须重写这两个方法。  </span><br><span class="line">&amp;emsp;3） 如果自定义对象做为Map的键，那么必须重写hashCode和equals。</span><br><span class="line">说明：String重写了hashCode和equals方法，所以我们可以非常愉快地使用String对象作为key来使用。  </span><br><span class="line">2.【强制】 ArrayList的subList结果不可强转成ArrayList，否则会抛出ClassCastException异常，即java.util.RandomAccessSubList cannot be cast to java.util.ArrayList.   </span><br><span class="line">&amp;emsp;说明：subList 返回的是 ArrayList 的内部类 SubList，并不是 ArrayList ，而是 ArrayList 的一个视图，对于SubList子列表的所有操作最终会反映到原列表上。  </span><br><span class="line">3.【强制】在subList场景中，高度注意对原集合元素个数的修改，会导致子列表的遍历、增加、删除均会产生ConcurrentModificationException 异常。  </span><br><span class="line">4.【强制】使用集合转数组的方法，必须使用集合的toArray(T[] array)，传入的是类型完全一样的数组，大小就是list.size()。  </span><br><span class="line">&amp;emsp;说明：使用toArray带参方法，入参分配的数组空间不够大时，toArray方法内部将重新分配内存空间，并返回新数组地址；如果数组元素大于实际所需，下标为[ list.size() ]的数组元素将被置为null，其它数组元素保持原值，因此最好将方法入参数组大小定义与集合元素个数一致。  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure>
<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(2);
list.add(&quot;guan&quot;);
list.add(&quot;bao&quot;);
String[] array = new String[list.size()];
array = list.toArray(array);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&amp;emsp;反例：直接使用toArray无参方法存在问题，此方法返回值只能是Object[]类，若强转其它类型数组将出现ClassCastException错误。  </span><br><span class="line">5.【强制】使用工具类Arrays.asList()把数组转换成集合时，不能使用其修改集合相关的方法，它的add/remove/clear方法会抛出 UnsupportedOperationException异常。  </span><br><span class="line">&amp;emsp;说明：asList的返回对象是一个Arrays内部类，并没有实现集合的修改方法。Arrays.asList体现的是适配器模式，只是转换接口，后台的数据仍是数组。</span><br></pre></td></tr></table></figure>
<pre><code>String[] str = new String[] { &quot;you&quot;, &quot;wu&quot; };
List list = Arrays.asList(str);
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;第一种情况：list.add(&quot;yangguanbao&quot;); 运行时异常。  </span><br><span class="line">&amp;emsp;&amp;emsp;第二种情况：str[0] = &quot;gujin&quot;; 那么list.get(0)也会随之修改。  </span><br><span class="line">6.【强制】泛型通配符&lt;? extends T&gt;来接收返回的数据，此写法的泛型集合不能使用add方法，而&lt;? super T&gt;不能使用get方法，做为接口调用赋值时易出错。  </span><br><span class="line">&amp;emsp;说明：扩展说一下PECS(Producer Extends Consumer Super)原则：  </span><br><span class="line">&amp;emsp;&amp;emsp;第一、频繁往外读取内容的，适合用&lt;? extends T&gt;。  </span><br><span class="line">&amp;emsp;&amp;emsp;第二、经常往里插入的，适合用&lt;? super T&gt;。  </span><br><span class="line">7.【强制】不要在foreach循环里进行元素的remove/add操作。remove元素请使用Iterator方式，如果并发操作，需要对Iterator对象加锁。  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure>
<p>  Iterator<string> iterator = list.iterator();<br>    while (iterator.hasNext()) {<br>      String item = iterator.next();<br>      if (删除元素的条件) {<br>        iterator.remove();<br>      }<br>  }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&amp;emsp;反例：</span><br></pre></td></tr></table></figure></string></p>
<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();
list.add(&quot;1&quot;);
list.add(&quot;2&quot;);
for (String item : list) {
  if (&quot;1&quot;.equals(item)) {
     list.remove(item);
  }
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&amp;emsp;说明：以上代码的执行结果肯定会出乎大家的意料，那么试一下把“1”换成“2”，会是同样的结果吗？  </span><br><span class="line">8.【强制】 在JDK7版本及以上，Comparator要满足如下三个条件，不然Arrays.sort，Collections.sort会报IllegalArgumentException异常。  </span><br><span class="line">&amp;emsp;说明：三个条件如下  </span><br><span class="line">&amp;emsp;&amp;emsp;1） x，y的比较结果和y，x的比较结果相反。  </span><br><span class="line">&amp;emsp;&amp;emsp;2） x&gt;y，y&gt;z，则x&gt;z。  </span><br><span class="line">&amp;emsp;&amp;emsp;3） x=y，则x，z比较结果和y，z比较结果相同。  </span><br><span class="line">&amp;emsp;反例：下例中没有处理相等的情况，实际使用中可能会出现异常：</span><br></pre></td></tr></table></figure>
<pre><code>new Comparator&lt;Student&gt;() {
    @Override
    public int compare(Student o1, Student o2) {
        return o1.getId() &gt; o2.getId() ? 1 : -1;
    }
};
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">9.【推荐】集合初始化时，指定集合初始值大小。  </span><br><span class="line">&amp;emsp;说明：HashMap使用HashMap(int initialCapacity) 初始化，  </span><br><span class="line">&amp;emsp;正例：initialCapacity =(需要存储的元素个数 / 负载因子) + 1。注意负载因子（即loader factor）默认为0.75，如果暂时无法确定初始值大小，请设置为16（即默认值）。  </span><br><span class="line">&amp;emsp;反例：HashMap需要放置1024个元素，由于没有设置容量初始大小，随着元素不断增加，容量7次被迫扩大，resize需要重建hash表，严重影响性能。  </span><br><span class="line">10.【推荐】使用entrySet遍历Map类集合KV，而不是keySet方式进行遍历。  </span><br><span class="line">&amp;emsp;说明：keySet其实是遍历了2次，一次是转为Iterator对象，另一次是从hashMap中取出key所对应的value。而entrySet只是遍历了一次就把key和value都放到了entry中，效率更高。如果是JDK8，使用Map.foreach方法。</span><br><span class="line">&amp;emsp;正例：values()返回的是V值集合，是一个list集合对象；keySet()返回的是K值集合，是一个Set集合对象；entrySet()返回的是K-V值组合集合。  </span><br><span class="line">11.【推荐】高度注意Map类集合K/V能不能存储null值的情况，如下表格：  </span><br><span class="line"></span><br><span class="line">| 集合类 | Key |	Value |	Super |	说明</span><br><span class="line">|----|----|----|----|----|</span><br><span class="line">|Hashtable |	不允许为null|	不允许为null |	Dictionary| 	线程安全</span><br><span class="line">|ConcurrentHashMap 	|不允许为null 	|不允许为null 	|AbstractMap |	锁分段技术（JDK8:CAS）</span><br><span class="line">|TreeMap 	|不允许为null| 	允许为null |	AbstractMap |	线程不安全</span><br><span class="line">|HashMap |	允许为null |	允许为null |	AbstractMap |	线程不安全</span><br><span class="line">&amp;emsp;反例： 由于HashMap的干扰，很多人认为ConcurrentHashMap是可以置入null值，而事实上，存储null值时会抛出NPE异常。  </span><br><span class="line">12.【参考】合理利用好集合的有序性(sort)和稳定性(order)，避免集合的无序性(unsort)和不稳定性(unorder)带来的负面影响。   </span><br><span class="line">&amp;emsp;说明：有序性是指遍历的结果是按某种比较规则依次排列的。稳定性指集合每次遍历的元素次序是一定的。如：ArrayList是order/unsort；HashMap是unorder/unsort；TreeSet是order/sort。  </span><br><span class="line">13.【参考】利用Set元素唯一的特性，可以快速对一个集合进行去重操作，避免使用List的contains方法进行遍历、对比、去重操作。   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.6 并发规约</span><br><span class="line">1.【强制】获取单例对象需要保证线程安全，其中的方法也要保证线程安全。  </span><br><span class="line">&amp;emsp;说明：资源驱动类、工具类、单例工厂类都需要注意。  </span><br><span class="line">2.【强制】创建线程或线程池时请指定有意义的线程名称，方便出错时回溯。  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure>
<pre><code>public class TimerTaskThread extends Thread {  
  public TimerTaskThread() {  
    super.setName(&quot;TimerTaskThread&quot;);  
    ...  
  }
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3.【强制】线程资源必须通过线程池提供，不允许在应用中自行显式创建线程。  </span><br><span class="line">&amp;emsp;说明：使用线程池的好处是减少在创建和销毁线程上所花的时间以及系统资源的开销，解决资源不足的问题。如果不使用线程池，有可能造成系统创建大量同类线程而导致消耗完内存或者“过度切换”的问题。  </span><br><span class="line"></span><br><span class="line">4.【强制】线程池不允许使用Executors去创建，而是通过ThreadPoolExecutor的方式，这样的处理方式让写的同学更加明确线程池的运行规则，规避资源耗尽的风险。  </span><br><span class="line">&amp;emsp;说明：Executors返回的线程池对象的弊端如下：  </span><br><span class="line">&amp;emsp;&amp;emsp;1）FixedThreadPool和SingleThreadPool:允许的请求队列长度为Integer.MAX_VALUE，可能会堆积大量的请求，从而导致OOM。  </span><br><span class="line">&amp;emsp;&amp;emsp;2）CachedThreadPool和ScheduledThreadPool:允许的创建线程数量为Integer.MAX_VALUE，可能会创建大量的线程，从而导致OOM。</span><br><span class="line"></span><br><span class="line">5.【强制】SimpleDateFormat 是线程不安全的类，一般不要定义为static变量，如果定义为static，必须加锁，或者使用DateUtils工具类。  </span><br><span class="line">&amp;emsp;正例：注意线程安全，使用DateUtils。亦推荐如下处理：</span><br></pre></td></tr></table></figure>
<pre><code>private static final ThreadLocal&lt;DateFormat&gt; df = new ThreadLocal&lt;DateFormat&gt;() {  
  @Override  
  protected DateFormat initialValue() {  
    return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);  
  }  
};  
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&amp;emsp;说明：如果是JDK8的应用，可以使用Instant代替Date，LocalDateTime代替Calendar，DateTimeFormatter代替SimpleDateFormat，官方给出的解释：simple beautiful strong immutable thread-safe。  </span><br><span class="line">6.【强制】高并发时，同步调用应该去考量锁的性能损耗。能用无锁数据结构，就不要用锁；能锁区块，就不要锁整个方法体；能用对象锁，就不要用类锁。  </span><br><span class="line">&amp;emsp;说明：尽可能使加锁的代码块工作量尽可能的小，避免在锁代码块中调用RPC方法。  </span><br><span class="line">7.【强制】对多个资源、数据库表、对象同时加锁时，需要保持一致的加锁顺序，否则可能会造成死锁。  </span><br><span class="line">&amp;emsp;说明：线程一需要对表A、B、C依次全部加锁后才可以进行更新操作，那么线程二的加锁顺序也必须是A、B、C，否则可能出现死锁。  </span><br><span class="line">8.【强制】并发修改同一记录时，避免更新丢失，需要加锁。要么在应用层加锁，要么在缓存加锁，要么在数据库层使用乐观锁，使用version作为更新依据。  </span><br><span class="line">&amp;emsp;说明：如果每次访问冲突概率小于20%，推荐使用乐观锁，否则使用悲观锁。乐观锁的重试次数不得小于3次。  </span><br><span class="line">9.【强制】多线程并行处理定时任务时，Timer运行多个TimeTask时，只要其中之一没有捕获抛出的异常，其它任务便会自动终止运行，使用ScheduledExecutorService则没有这个问题。  </span><br><span class="line">10.【推荐】使用CountDownLatch进行异步转同步操作，每个线程退出前必须调用countDown方法，线程执行代码注意catch异常，确保countDown方法被执行到，避免主线程无法执行至await方法，直到超时才返回结果。   </span><br><span class="line">&amp;emsp;说明：注意，子线程抛出异常堆栈，不能在主线程try-catch到。   </span><br><span class="line">11.【推荐】避免Random实例被多线程使用，虽然共享该实例是线程安全的，但会因竞争同一seed 导致的性能下降。  </span><br><span class="line">&amp;emsp;说明：Random实例包括java.util.Random 的实例或者 Math.random()的方式。  </span><br><span class="line">&amp;emsp;正例：在JDK7之后，可以直接使用API ThreadLocalRandom，而在 JDK7之前，需要编码保证每个线程持有一个实例。  </span><br><span class="line">12.【推荐】在并发场景下，通过双重检查锁（double-checked locking）实现延迟初始化的优化问题隐患(可参考 The &quot;Double-Checked Locking is Broken&quot; Declaration)，推荐解决方案中较为简单一种（适用于JDK5及以上版本），将目标属性声明为 volatile型。  </span><br><span class="line">&amp;emsp;反例：</span><br></pre></td></tr></table></figure>
<pre><code>class Singleton {
  private Helper helper = null;
  public Helper getHelper() {
    if (helper == null) synchronized(this) {
      if (helper == null)
      helper = new Helper();
    }
      return helper;
  }
  // other methods and fields...
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">13.【参考】volatile解决多线程内存不可见问题。对于一写多读，是可以解决变量同步问题，但是如果多写，同样无法解决线程安全问题。如果是count++操作，使用如下类实现：AtomicInteger count = new AtomicInteger(); count.addAndGet(1); 如果是JDK8，推荐使用LongAdder对象，比AtomicLong性能更好（减少乐观锁的重试次数）。  </span><br><span class="line">14.【参考】HashMap在容量不够进行resize时由于高并发可能出现死链，导致CPU飙升，在开发过程中可以使用其它数据结构或加锁来规避此风险。  </span><br><span class="line">15.【参考】ThreadLocal无法解决共享对象的更新问题，ThreadLocal对象建议使用static修饰。这个变量是针对一个线程内所有操作共享的，所以设置为静态变量，所有此类实例共享此静态变量 ，也就是说在类第一次被使用时装载，只分配一块存储空间，所有此类的对象(只要是这个线程内定义的)都可以操控这个变量。  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.7 控制语句</span><br><span class="line">1.【强制】在一个switch块内，每个case要么通过break/return等来终止，要么注释说明程序将继续执行到哪一个case为止；在一个switch块内，都必须包含一个default语句并且放在最后，即使它什么代码也没有。  </span><br><span class="line">2.【强制】在if/else/for/while/do语句中必须使用大括号。即使只有一行代码，避免采用单行的编码方式：if (condition) statements;   </span><br><span class="line">3.【推荐】表达异常的分支时，少用if-else方式，这种方式可以改写成：</span><br></pre></td></tr></table></figure>
<p>  if (condition) {<br>  …<br>  return obj;<br>  }<br>  // 接着写else的业务逻辑代码;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;emsp;说明：如果非得使用if()...else if()...else...方式表达逻辑，【强制】避免后续代码维护困难，请勿超过3层。  </span><br><span class="line">&amp;emsp;正例：超过3层的 if-else 的逻辑判断代码可以使用卫语句、策略模式、状态模式等来实现，其中卫语句示例如下：</span><br></pre></td></tr></table></figure></p>
<p>public void today() {<br>  if (isBusy()) {<br>    System.out.println(“change time.”);<br>    return;<br>  }<br>  if (isFree()) {<br>    System.out.println(“go to travel.”);<br>    retur<br>  }<br>  System.out.println(“stay at home to learn Alibaba Java Coding Guidelines.”);<br>  return;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4.【推荐】除常用方法（如getXxx/isXxx）等外，不要在条件判断中执行其它复杂的语句，将复杂逻辑判断的结果赋值给一个有意义的布尔变量名，以提高可读性。    </span><br><span class="line">&amp;emsp;说明：很多if语句内的逻辑相当复杂，阅读者需要分析条件表达式的最终结果，才能明确什么样的条件执行什么样的语句，那么，如果阅读者分析逻辑表达式错误呢？  </span><br><span class="line">&amp;emsp;正例：</span><br></pre></td></tr></table></figure></p>
<p>// 伪代码如下<br>final boolean existed = (file.open(fileName, “w”) != null) &amp;&amp; (…) || (…);<br>if (existed) {<br>…<br>}<br>反例： if ((file.open(fileName, “w”) != null) &amp;&amp; (…) || (…)) {<br>…<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">5.【推荐】循环体中的语句要考量性能，以下操作尽量移至循环体外处理，如定义对象、变量、获取数据库连接，进行不必要的try-catch操作（这个try-catch是否可以移至循环体外）。  </span><br><span class="line">6.【推荐】接口入参保护，这种场景常见的是用于做批量操作的接口。   </span><br><span class="line">7.【参考】下列情形，需要进行参数校验：  </span><br><span class="line">&amp;emsp;1） 调用频次低的方法。   </span><br><span class="line">&amp;emsp;2） 执行时间开销很大的方法。此情形中，参数校验时间几乎可以忽略不计，但如果因为参数错误导致中间执行回退，或者错误，那得不偿失。  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&amp;emsp;3） 需要极高稳定性和可用性的方法。   </span><br><span class="line">&amp;emsp;4） 对外提供的开放接口，不管是RPC/API/HTTP接口。  </span><br><span class="line">&amp;emsp;5） 敏感权限入口。  </span><br><span class="line">8.【参考】下列情形，不需要进行参数校验：   </span><br><span class="line">&amp;emsp;1） 极有可能被循环调用的方法。但在方法说明里必须注明外部参数检查要求。  </span><br><span class="line">&amp;emsp;2） 底层调用频度比较高的方法。毕竟是像纯净水过滤的最后一道，参数错误不太可能到底层才会暴露问题。一般DAO层与Service层都在同一个应用中，部署在同一台服务器中，所以DAO的参数校验，可以省略。  </span><br><span class="line">&amp;emsp;3） 被声明成private只会被自己代码所调用的方法，如果能够确定调用方法的代码传入参数已经做过检查或者肯定不会有问题，此时可以不校验参数。   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.8 注释规约</span><br><span class="line">1.【强制】类、类属性、类方法的注释必须使用Javadoc规范，使用/** 内容*/格式，不得使用// xxx方式。   </span><br><span class="line">&amp;emsp;说明：在IDE编辑窗口中，Javadoc方式会提示相关注释，生成Javadoc可以正确输出相应注释；在IDE中，工程调用方法时，不进入方法即可悬浮提示方法、参数、返回值的意义，提高阅读效率。  </span><br><span class="line">2.【强制】所有的抽象方法（包括接口中的方法）必须要用Javadoc注释、除了返回值、参数、异常说明外，还必须指出该方法做什么事情，实现什么功能。 说明：对子类的实现要求，或者调用注意事项，请一并说明。  </span><br><span class="line">3.【强制】所有的类都必须添加创建者和创建日期。  </span><br><span class="line">4.【强制】方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释使用&apos;/*&apos; &apos;*/&apos;注释，注意与代码对齐。  </span><br><span class="line">5.【强制】所有的枚举类型字段必须要有注释，说明每个数据项的用途。  </span><br><span class="line">6.【推荐】与其“半吊子”英文来注释，不如用中文注释把问题说清楚。专有名词与关键字保持英文原文即可。  </span><br><span class="line">&amp;emsp;反例：“TCP连接超时”解释成“传输控制协议连接超时”，理解反而费脑筋。  </span><br><span class="line">7.【推荐】代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻辑等的修改。  </span><br><span class="line">&amp;emsp;说明：代码与注释更新不同步，就像路网与导航软件更新不同步一样，如果导航软件严重滞后，就失去了导航的意义。  </span><br><span class="line">8.【参考】谨慎注释掉代码。在上方详细说明，而不是简单地注释掉。如果无用，则删除。  </span><br><span class="line">&amp;emsp;说明：代码被注释掉有两种可能性：  </span><br><span class="line">&amp;emsp;&amp;emsp;1）后续会恢复此段代码逻辑。  </span><br><span class="line">&amp;emsp;&amp;emsp;2）永久不用。前者如果没有备注信息，难以知晓注释动机。后者建议直接删掉（代码仓库保存了历史代码）。  </span><br><span class="line">9.【参考】对于注释的要求：  </span><br><span class="line">&amp;emsp;第一、能够准确反应设计思想和代码逻辑；  </span><br><span class="line">&amp;emsp;第二、能够描述业务含义，使别的程序员能够迅速了解到代码背后的信息。完全没有注释的大段代码对于阅读者形同天书，注释是给自己看的，即使隔很长时间，也能清晰理解当时的思路；注释也是给继任者看的，使其能够快速接替自己的工作。  </span><br><span class="line">10.【参考】好的命名、代码结构是自解释的，注释力求精简准确、表达到位。避免出现注释的一个极端：过多过滥的注释，代码的逻辑一旦修改，修改注释是相当大的负担。    </span><br><span class="line">反例：</span><br></pre></td></tr></table></figure></p>
<p>// put elephant into fridge<br>put(elephant, fridge);<br><code>`</code><br>方法名put，加上两个有意义的变量名elephant和fridge，已经说明了这是在干什么，语义清晰的代码不需要额外的注释。   </p>
<p>11.【参考】特殊注释标记，请注明标记人与标记时间。注意及时处理这些标记，通过标记扫描，经常清理此类标记。线上故障有时候就是来源于这些标记处的代码。<br>&emsp;1） 待办事宜（TODO）:（ 标记人，标记时间，[预计处理时间]） 表示需要实现，但目前还未实现的功能。这实际上是一个Javadoc的标签，目前的Javadoc还没有实现，但已经被广泛使用。只能应用于类，接口和方法（因为它是一个Javadoc标签）。<br>&emsp;2） 错误，不能工作（FIXME）:（标记人，标记时间，[预计处理时间]） 在注释中用FIXME标记某代码是错误的，而且不能工作，需要及时纠正的情况。   </p>
<h2 id="第3章-异常日志"><a href="#第3章-异常日志" class="headerlink" title="第3章    异常日志"></a>第3章    异常日志</h2><h3 id="3-1-异常处理"><a href="#3-1-异常处理" class="headerlink" title="3.1 异常处理"></a>3.1 异常处理</h3>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2018/01/23/Java开发规范/" data-id="cjfb3thdc000lrk5ly55rq1mm" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Java 实现中文-拼音转换" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/16/Java 实现中文-拼音转换/">Java 实现中文-拼音转换</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/12/16/Java 实现中文-拼音转换/">
            <time datetime="2017-12-16T02:16:56.000Z" itemprop="datePublished">2017-12-16</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Java/">Java</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Java/">Java</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="Java-实现中文-拼音转换"><a href="#Java-实现中文-拼音转换" class="headerlink" title="Java 实现中文-拼音转换"></a>Java 实现中文-拼音转换</h1><pre><code>/**
 * 中文转拼音
 *
 * @author ： CatalpaFlat
 */
public class ChineseToPinyinUtil {
    /**
     * 将文字转为汉语拼音
     *
     * @param chineseLanguage 要转成拼音的中文
     */
    public static String toHanyuPinyin(String chineseLanguage) {
        char[] clChars = chineseLanguage.trim().toCharArray();
        StringBuilder hanyupinyin = new StringBuilder();
        HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
        // 输出拼音全部小写
        defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);
        // 不带声调
        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);
        defaultFormat.setVCharType(HanyuPinyinVCharType.WITH_V);
        try {
            for (char clChar : clChars) {
                // 如果字符是中文,则将中文转为汉语拼音
                if (String.valueOf(clChar).matches(&quot;[\u4e00-\u9fa5]+&quot;)) {
                    hanyupinyin.append(PinyinHelper.toHanyuPinyinStringArray(clChar, defaultFormat)[0]);
                    // 如果字符不是中文,则不转换
                } else {
                    hanyupinyin.append(clChar);
                }
            }
        } catch (BadHanyuPinyinOutputFormatCombination e) {
            System.out.println(&quot;字符不能转成汉语拼音&quot;);
        }
        return hanyupinyin.toString();
    }

    public static String getFirstLettersUp(String chineseLanguage) {
        return getFirstLetters(chineseLanguage, HanyuPinyinCaseType.UPPERCASE);
    }

    public static String getFirstLettersLo(String chineseLanguage) {
        return getFirstLetters(chineseLanguage, HanyuPinyinCaseType.LOWERCASE);
    }

    private static String getFirstLetters(String chineseLanguage, HanyuPinyinCaseType caseType) {
        char[] clChars = chineseLanguage.trim().toCharArray();
        StringBuilder hanyupinyin = new StringBuilder();
        HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
        // 输出拼音全部大写
        defaultFormat.setCaseType(caseType);
        // 不带声调
        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);
        try {
            for (char clChar : clChars) {
                String str = String.valueOf(clChar);
                // 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
                if (str.matches(&quot;[\u4e00-\u9fa5]+&quot;)) {
                    hanyupinyin.append(PinyinHelper.toHanyuPinyinStringArray(clChar, defaultFormat)[0].substring(0, 1));
                    // 如果字符是数字,取数字
                } else if (str.matches(&quot;[0-9]+&quot;)) {
                    hanyupinyin.append(clChar);
                    // 如果字符是字母,取字母
                } else if (str.matches(&quot;[a-zA-Z]+&quot;)) {
                    hanyupinyin.append(clChar);
                    //如果是标点符号的话，带着
                } else {// 否则不转换
                    hanyupinyin.append(clChar);
                }
            }
        } catch (BadHanyuPinyinOutputFormatCombination e) {
            System.out.println(&quot;字符不能转成汉语拼音&quot;);
        }
        return hanyupinyin.toString();
    }

    public static String getPinyinString(String chineseLanguage) {
        char[] clChars = chineseLanguage.trim().toCharArray();
        StringBuilder hanyupinyin = new StringBuilder();
        HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
        // 输出拼音全部大写
        defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);
        // 不带声调
        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);
        try {
            for (char clChar : clChars) {
                String str = String.valueOf(clChar);
                // 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
                if (str.matches(&quot;[\u4e00-\u9fa5]+&quot;)) {
                    hanyupinyin.append(PinyinHelper.toHanyuPinyinStringArray(
                            clChar, defaultFormat)[0]);
                    // 如果字符是数字,取数字
                } else if (str.matches(&quot;[0-9]+&quot;)) {
                    // 如果字符是字母,取字母
                    hanyupinyin.append(clChar);
                } else if (str.matches(&quot;[a-zA-Z]+&quot;)) {
                    hanyupinyin.append(clChar);
                }
            }
        } catch (BadHanyuPinyinOutputFormatCombination e) {
            System.out.println(&quot;字符不能转成汉语拼音&quot;);
        }
        return hanyupinyin.toString();
    }

    /**
     * 取第一个汉字的第一个字符
     */
    public static String getFirstLetter(String chineseLanguage) {
        char[] clChars = chineseLanguage.trim().toCharArray();
        String hanyupinyin = &quot;&quot;;
        HanyuPinyinOutputFormat defaultFormat = new HanyuPinyinOutputFormat();
        // 输出拼音全部大写
        defaultFormat.setCaseType(HanyuPinyinCaseType.UPPERCASE);
        // 不带声调
        defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);
        try {
            String str = String.valueOf(clChars[0]);
            // 如果字符是中文,则将中文转为汉语拼音,并取第一个字母
            if (str.matches(&quot;[\u4e00-\u9fa5]+&quot;)) {
                hanyupinyin = PinyinHelper.toHanyuPinyinStringArray(
                        clChars[0], defaultFormat)[0].substring(0, 1);
                // 如果字符是数字,取数字
            } else if (str.matches(&quot;[0-9]+&quot;)) {
                hanyupinyin += clChars[0];
                // 如果字符是字母,取字母
            } else if (str.matches(&quot;[a-zA-Z]+&quot;)) {
                hanyupinyin += clChars[0];
            }
        } catch (BadHanyuPinyinOutputFormatCombination e) {
            System.out.println(&quot;字符不能转成汉语拼音&quot;);
        }
        return hanyupinyin;
    }

//    public static void main(String[] args) {
//        ChineseToPinyinUtil hanyuPinyinHelper = new ChineseToPinyinUtil();
//        String city = ChineseToPinyinUtil.toHanyuPinyin(&quot;深圳市&quot;);
//        String string = &quot;shenzhen&quot;;
//        if (city.contains(string)) {
//            System.out.println(&quot;OK&quot;);
//        }
//    }
}
</code></pre>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2017/12/16/Java 实现中文-拼音转换/" data-id="cjfb3thd20008rk5lywyxi1oi" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-RabbitMQ" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/11/11/RabbitMQ/">消息队列之RabbitMQ</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/11/11/RabbitMQ/">
            <time datetime="2017-11-11T08:08:34.000Z" itemprop="datePublished">2017-11-11</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/消息队列/">消息队列</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/消息队列/">消息队列</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h1><h3 id="1-RabbitMQ概述"><a href="#1-RabbitMQ概述" class="headerlink" title="1.RabbitMQ概述"></a>1.RabbitMQ概述</h3><p>&emsp;&emsp;MQ全称为Message Queue, 消息队列（MQ）是一种应用程序对应用程序的通信方法。应用程序通过读写出入队列的消息（针对应用程序的数据）来通信，而无需专用连接来链接它们。消息传递指的是程序之间通过在消息中发送数据进行通信，而不是通过直接调用彼此来通信，直接调用通常是用于诸如远程过程调用的技术。排队指的是应用程序通过 队列来通信。队列的使用除去了接收和发送应用程序同时执行的要求。其中较为成熟的MQ产品有IBM WEBSPHERE MQ等等。</p>
<h3 id="2-RabbitMQ安装"><a href="#2-RabbitMQ安装" class="headerlink" title="2.RabbitMQ安装"></a>2.RabbitMQ安装</h3><p>Windows环境下：<br>RabbitMQ基于erlang，因此先安装erlang<br>2.1 安装erlang<br>2.1.1 下载并安装erlang<br>erlang下载地址：<a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">http://www.erlang.org/downloads</a><br>erlang安装过程直接一直next到底<br>2.1.2 设置erlang环境变量<br><img src="https://i.imgur.com/IsFZU83.png" alt=""><br>将;%ERLANG_HOME%\bin添加到Path<br>2.1.3 测试erlang是否安装成功<br><img src="https://i.imgur.com/qJAIMRT.png" alt=""><br>2.2 安装RabbitMQ<br>2.2.1 下载并安装RabbitMQ<br>RabbitMQ下载地址：<a href="http://www.rabbitmq.com/install-windows.html" target="_blank" rel="noopener">http://www.rabbitmq.com/install-windows.html</a><br>RabbitMQ安装过程也一直next到底<br>2.2.2 激活 RabbitMQ’s Management Plugin<br>到RabbitMQ的安装目录找到<br>E:\RabbitMQServer\rabbitmq_server-3.6.5\sbin\<br>运行rabbitmq-plugins enable rabbitmq_management<br><img src="https://i.imgur.com/S8Q6YoD.png" alt=""><br>接着直接重启服务<br>rabbitmq-service stop<br><img src="https://i.imgur.com/TgZPpm6.png" alt=""><br>rabbitmq-service start<br><img src="https://i.imgur.com/Qe0CTzI.png" alt=""><br>2.2.3 浏览器访问<a href="http://localhost:15672/#/" target="_blank" rel="noopener">http://localhost:15672/#/</a><br>使用账号：guest密码：guest登录即可<br><img src="https://i.imgur.com/FbJtEqA.png" alt=""><br>自此RabbitMQ安装完毕</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2017/11/11/RabbitMQ/" data-id="cjfb3thda000jrk5l3cwk6ns8" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-nginx/服务器集成Nginx" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="服务器快速集成Nginx"><a href="#服务器快速集成Nginx" class="headerlink" title="服务器快速集成Nginx"></a>服务器快速集成Nginx</h1><h3 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1.安装依赖"></a>1.安装依赖</h3><h4 id="1-1-pcre重定向依赖"><a href="#1-1-pcre重定向依赖" class="headerlink" title="1.1.pcre重定向依赖"></a>1.1.pcre重定向依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install pcre*</span><br></pre></td></tr></table></figure>
<ul>
<li><p>PCRE(Perl Compatible Regular Expressions)是一个Perl库，不止具有http重定向依赖，还包括 perl 兼容的正则表达式库。nginx的http模块使用pcre来解析正则表达式，所以需要在linux上安装pcre库。</p>
<h4 id="1-2-openssl-http-https支持，如果不需要https可以不安装。"><a href="#1-2-openssl-http-https支持，如果不需要https可以不安装。" class="headerlink" title="1.2.openssl(http/https支持，如果不需要https可以不安装。"></a>1.2.openssl(http/https支持，如果不需要https可以不安装。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install pcre*</span><br></pre></td></tr></table></figure>
</li>
<li><p>OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。</p>
<h4 id="1-3-安装-Tengine-执行配置命令-gcc环境"><a href="#1-3-安装-Tengine-执行配置命令-gcc环境" class="headerlink" title="1.3.安装 Tengine 执行配置命令 gcc环境"></a>1.3.安装 Tengine 执行配置命令 gcc环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ autoconf automake make</span><br></pre></td></tr></table></figure>
</li>
<li><p>若是本机上已经安装则可以忽略，主要用于编译Nginx源码</p>
</li>
</ul>
<h4 id="2-下载解压"><a href="#2-下载解压" class="headerlink" title="2.下载解压"></a>2.下载解压</h4><h4 id="2-1-下载"><a href="#2-1-下载" class="headerlink" title="2.1.下载"></a>2.1.下载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.12.2.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="2-2-解压"><a href="#2-2-解压" class="headerlink" title="2.2.解压"></a>2.2.解压</h4><p>先创建Nginx存放路径，再进行解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir nginxgz</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.7.8.tar.gz -C /usr/local/nginxgz</span><br></pre></td></tr></table></figure>
<h3 id="3-编译安装Nginx"><a href="#3-编译安装Nginx" class="headerlink" title="3.编译安装Nginx"></a>3.编译安装Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginxgz/nginx-1.12.2</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx --with-http_ssl_module --with-http_v2_module --with-http_stub_status_module --with-pcre</span><br></pre></td></tr></table></figure>
<ul>
<li>–with-http_ssl_module ： 支持https</li>
<li>–with-http_stub_status_module ： 支持nginx状态查询</li>
<li>–with-http_v2_module ： 支持Google发明的SPDY协议，必须有ssl的支持</li>
<li>–with-pcre ： 支持rewrite重写功能，必须有pcre<br>注：若是没有安装gcc则会报如下错误：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checking for OS</span><br><span class="line"> + Linux 2.6.32-431.el6.x86_64 x86_64</span><br><span class="line">checking for C compiler ... not found</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>编译：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="4-操作Nginx"><a href="#4-操作Nginx" class="headerlink" title="4.操作Nginx"></a>4.操作Nginx</h3><ul>
<li><p>启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s stop</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-配置防火墙（iptables）测试"><a href="#5-配置防火墙（iptables）测试" class="headerlink" title="5.配置防火墙（iptables）测试"></a>5.配置防火墙（iptables）测试</h3><h4 id="5-1-关闭防火墙"><a href="#5-1-关闭防火墙" class="headerlink" title="5.1.关闭防火墙"></a>5.1.关闭防火墙</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop</span><br></pre></td></tr></table></figure>
<h4 id="5-2-编辑配置文件"><a href="#5-2-编辑配置文件" class="headerlink" title="5.2.编辑配置文件"></a>5.2.编辑配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure>
<h4 id="5-3-开发80端口"><a href="#5-3-开发80端口" class="headerlink" title="5.3.开发80端口"></a>5.3.开发80端口</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h4 id="5-4-重启服务"><a href="#5-4-重启服务" class="headerlink" title="5.4.重启服务"></a>5.4.重启服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>
<h4 id="测试，浏览器输入服务器地址（如：192-168-1-111）"><a href="#测试，浏览器输入服务器地址（如：192-168-1-111）" class="headerlink" title="测试，浏览器输入服务器地址（如：192.168.1.111）"></a>测试，浏览器输入服务器地址（如：192.168.1.111）</h4><p><img src="https://i.imgur.com/32msO8G.png" alt=""></p>
<h4 id="6-将Nginx添加到服务（service）中"><a href="#6-将Nginx添加到服务（service）中" class="headerlink" title="6.将Nginx添加到服务（service）中"></a>6.将Nginx添加到服务（service）中</h4><ul>
<li><p>6.1.切换到启动脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/init.d</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.2.创建nginx文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.3.编辑nginx文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/init.d/nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.4.并且添加以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash  </span><br><span class="line"># nginx Startup script for the Nginx HTTP Server  </span><br><span class="line">#  </span><br><span class="line"># chkconfig: - 85 15  </span><br><span class="line"># description: Nginx is a high-performance web and proxy server.  </span><br><span class="line"># It has a lot of features, but it&apos;s not for everyone.  </span><br><span class="line"># processname: nginx  </span><br><span class="line"># pidfile: /var/run/nginx.pid  </span><br><span class="line"># config: /usr/local/nginx/conf/nginx.conf  </span><br><span class="line">nginxd=/usr/local/nginx/sbin/nginx  </span><br><span class="line">nginx_config=/usr/local/nginx/conf/nginx.conf  </span><br><span class="line">nginx_pid=/usr/local/nginx/nginx.pid  </span><br><span class="line"> </span><br><span class="line">RETVAL=0  </span><br><span class="line">prog=&quot;nginx&quot; </span><br><span class="line"> </span><br><span class="line"># Source function library.  </span><br><span class="line">. /etc/rc.d/init.d/functions  </span><br><span class="line"> </span><br><span class="line"># Source networking configuration.  </span><br><span class="line">. /etc/sysconfig/network  </span><br><span class="line"> </span><br><span class="line"># Check that networking is up.  </span><br><span class="line">[ $&#123;NETWORKING&#125; = &quot;no&quot; ] &amp;&amp; exit 0  </span><br><span class="line"> </span><br><span class="line">[ -x $nginxd ] || exit 0  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># Start nginx daemons functions.  </span><br><span class="line">start() &#123;  </span><br><span class="line"> </span><br><span class="line">if [ -e $nginx_pid ];then </span><br><span class="line">   echo &quot;nginx already running....&quot; </span><br><span class="line">   exit 1  </span><br><span class="line">fi  </span><br><span class="line"> </span><br><span class="line">   echo -n $&quot;Starting $prog: &quot; </span><br><span class="line">   daemon $nginxd -c $&#123;nginx_config&#125;  </span><br><span class="line">   RETVAL=$?  </span><br><span class="line">   echo  </span><br><span class="line">   [ $RETVAL = 0 ] &amp;&amp; touch /var/lock/subsys/nginx  </span><br><span class="line">   return $RETVAL  </span><br><span class="line"> </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># Stop nginx daemons functions.  </span><br><span class="line">stop() &#123;  </span><br><span class="line">        echo -n $&quot;Stopping $prog: &quot; </span><br><span class="line">        killproc $nginxd  </span><br><span class="line">        RETVAL=$?  </span><br><span class="line">        echo  </span><br><span class="line">        [ $RETVAL = 0 ] &amp;&amp; rm -f /var/lock/subsys/nginx /var/run/nginx.pid  </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># reload nginx service functions.  </span><br><span class="line">reload() &#123;  </span><br><span class="line"> </span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot; </span><br><span class="line"> $nginxd -s reload  </span><br><span class="line">    #if your nginx version is below 0.8, please use this command: &quot;kill -HUP `cat $&#123;nginx_pid&#125;`&quot; </span><br><span class="line">    RETVAL=$?  </span><br><span class="line">    echo  </span><br><span class="line"> </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"># See how we were called.  </span><br><span class="line">case &quot;$1&quot; in </span><br><span class="line">start)  </span><br><span class="line">        start  </span><br><span class="line">        ;;  </span><br><span class="line"> </span><br><span class="line">stop)  </span><br><span class="line">        stop  </span><br><span class="line">        ;;  </span><br><span class="line"> </span><br><span class="line">reload)  </span><br><span class="line">        reload  </span><br><span class="line">        ;;  </span><br><span class="line"> </span><br><span class="line">restart)  </span><br><span class="line">        stop  </span><br><span class="line">        start  </span><br><span class="line">        ;;  </span><br><span class="line"> </span><br><span class="line">status)  </span><br><span class="line">        status $prog  </span><br><span class="line">        RETVAL=$?  </span><br><span class="line">        ;;  </span><br><span class="line">*)  </span><br><span class="line">        echo $&quot;Usage: $prog &#123;start|stop|restart|reload|status|help&#125;&quot; </span><br><span class="line">        exit 1  </span><br><span class="line">esac  </span><br><span class="line"> </span><br><span class="line">exit $RETVAL</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig: - 85 15</span><br><span class="line"># description: nginx is a World Wide Web server. It is used to serve</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>脚本中这两个不能去除，不然不能启动，而且会报以下错误，即语法错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx 服务不支持 chkconfig</span><br></pre></td></tr></table></figure>
</li>
<li><p>chkconfig语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语　法：chkconfig [--add][--del][--list][系统服务] 或 chkconfig [--level &lt;等级代号&gt;][系统服务][on/off/reset]</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.5.保存退出后，切换路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/rc.d/init.d</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.6.设置权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.7.chkconfig改变nginx运行级别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/chkconfig --level 345 nginx on</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>到此为止：<br>任何位置都能运行   service nginx start           可选  start | stop | restart | reload | status |  help</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2017/11/11/nginx/服务器集成Nginx/" data-id="cjfb3thf90023rk5lc7vf7oec" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-nginx/Nginx配置多虚拟主机（即配置域名）" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="Nginx配置多虚拟主机（即配置域名）"><a href="#Nginx配置多虚拟主机（即配置域名）" class="headerlink" title="Nginx配置多虚拟主机（即配置域名）"></a>Nginx配置多虚拟主机（即配置域名）</h1><h2 id="1-存放站点（即项目）"><a href="#1-存放站点（即项目）" class="headerlink" title="1.存放站点（即项目）"></a>1.存放站点（即项目）</h2><p>站点的根目录和域名相同</p>
<h3 id="1-1-创建a域名存放地址"><a href="#1-1-创建a域名存放地址" class="headerlink" title="1.1.创建a域名存放地址"></a>1.1.创建a域名存放地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/site/a.chen.com</span><br></pre></td></tr></table></figure>
<h3 id="1-2-创建a域名的首页"><a href="#1-2-创建a域名的首页" class="headerlink" title="1.2.创建a域名的首页"></a>1.2.创建a域名的首页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /data/site/a.chen.com</span><br><span class="line">touch inde.html</span><br><span class="line">echo &apos;this is a from chen com...&apos; &gt; /data/site/a.chen.com/inde.html</span><br></pre></td></tr></table></figure>
<h3 id="1-3-创建b域名存放地址"><a href="#1-3-创建b域名存放地址" class="headerlink" title="1.3.创建b域名存放地址"></a>1.3.创建b域名存放地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/site/b.chen.com</span><br></pre></td></tr></table></figure>
<h3 id="1-4-创建b域名的首页"><a href="#1-4-创建b域名的首页" class="headerlink" title="1.4.创建b域名的首页"></a>1.4.创建b域名的首页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /data/site/b.chen.com</span><br><span class="line">touch inde.html</span><br><span class="line">echo &apos;this is b from chen com...&apos; &gt; /data/site/b.chen.com/inde.html</span><br></pre></td></tr></table></figure>
<h3 id="1-5-添加日志存放目录"><a href="#1-5-添加日志存放目录" class="headerlink" title="1.5.添加日志存放目录"></a>1.5.添加日志存放目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/logs/nginx</span><br></pre></td></tr></table></figure>
<h2 id="2-配置nginx的配置文件"><a href="#2-配置nginx的配置文件" class="headerlink" title="2.配置nginx的配置文件"></a>2.配置nginx的配置文件</h2><p>（注：若还没安装nginx的话，详情请看这一篇文章</p>
<blockquote>
<p><a href="http://blog.csdn.net/dushiwodecuo/article/details/78393454）" target="_blank" rel="noopener">http://blog.csdn.net/dushiwodecuo/article/details/78393454）</a></p>
</blockquote>
<h3 id="2-1-进入nginx配置目录"><a href="#2-1-进入nginx配置目录" class="headerlink" title="2.1.进入nginx配置目录"></a>2.1.进入nginx配置目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/conf/</span><br></pre></td></tr></table></figure>
<h3 id="2-2-编辑nginx-conf"><a href="#2-2-编辑nginx-conf" class="headerlink" title="2.2.编辑nginx.conf"></a>2.2.编辑nginx.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure>
<h4 id="2-2-1-配置nginx日志格式"><a href="#2-2-1-配置nginx日志格式" class="headerlink" title="2.2.1.配置nginx日志格式"></a>2.2.1.配置nginx日志格式</h4><p>在nginx.conf中找到如下内容，并且将#注释标志去掉<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line"># &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line"># &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-2-配置nginx主配置内容"><a href="#2-2-2-配置nginx主配置内容" class="headerlink" title="2.2.2.配置nginx主配置内容"></a>2.2.2.配置nginx主配置内容</h4><p>a域名服务器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">	server_name a.chen.com;</span><br><span class="line">	listen 80;</span><br><span class="line">	root /data/site/a.chen.com;</span><br><span class="line">	access_log /data/logs/nginx/a.chen.com-access.log main;</span><br><span class="line">    location /</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>b域名服务器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">	server_name b.chen.com;</span><br><span class="line">	listen 80;</span><br><span class="line">	root /data/site/b.chen.com;</span><br><span class="line">	access_log /data/logs/nginx/b.chen.com-access.log main;</span><br><span class="line">    location /</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>配置解析：</p>
<ul>
<li>server{}：配置虚拟主机必须有的的段</li>
<li><p>server_name:虚拟主机的域名，可以写多个域名，类似于别名，比如说你可以配置成：（这样的话，任何一个域名，内容都是一样的）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_name a.chen.com b.chen.com c.chen.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>listen：127.0.0.1:80 监听端口</p>
</li>
<li>root ：站点根目录，网站文件存放的地方。（注：站点目录和域名尽量一样）</li>
<li>access_log：访问日志</li>
<li>location /{}：默认uri</li>
</ul>
<h3 id="3-检查nginx配置是否正确"><a href="#3-检查nginx配置是否正确" class="headerlink" title="3.检查nginx配置是否正确"></a>3.检查nginx配置是否正确</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -t</span><br></pre></td></tr></table></figure>
<ul>
<li>若出现以下两行ok和successful，表示配置没问题<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-重启nginx"><a href="#4-重启nginx" class="headerlink" title="4.重启nginx"></a>4.重启nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure>
<ul>
<li>（注：若是之前没有启动过，则启动即可，但若启动过了，应该重启，不然会出现后面配置成功后但是访问域名却一直是nginx的欢迎界面）<h4 id="5-测试"><a href="#5-测试" class="headerlink" title="5.测试"></a>5.测试</h4><h4 id="5-1-Windows下测试"><a href="#5-1-Windows下测试" class="headerlink" title="5.1.Windows下测试"></a>5.1.Windows下测试</h4>修改hosts文件：C:\Windows\System32\drivers\etc，添加以下内容：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.111 a.chen.com</span><br><span class="line">192.168.1.111 b.chen.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="5-2-Linux下测试"><a href="#5-2-Linux下测试" class="headerlink" title="5.2.Linux下测试"></a>5.2.Linux下测试</h4><p>修改hosts文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;192.168.1.111 a.chen.com 192.168.1.111 b.chen.com&apos; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure></p>
<h4 id="5-3-测试结果"><a href="#5-3-测试结果" class="headerlink" title="5.3.测试结果"></a>5.3.测试结果</h4><p>浏览器直接输入：a.chen.com 和 b.chen.com<br><img src="https://i.imgur.com/LTz299K.png" alt=""><br>Linux测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://a.chen.com</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.imgur.com/CvBAEYK.png" alt=""></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://catalpaflat.github.io/2017/11/11/nginx/Nginx配置多虚拟主机（即配置域名）/" data-id="cjfb3thf7001zrk5l9y4snjjo" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/28/hello-world/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Java/">Java</a></p>
                            <p class="item-title"><a href="/2018/03/28/hello-world/" class="title">Hello World</a></p>
                            <p class="item-date"><time datetime="2018-03-28T02:05:56.000Z" itemprop="datePublished">2018-03-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/23/Java 内存详解/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Java/">Java</a></p>
                            <p class="item-title"><a href="/2018/03/23/Java 内存详解/" class="title">Java JVM 内存详解</a></p>
                            <p class="item-date"><time datetime="2018-03-23T07:53:56.000Z" itemprop="datePublished">2018-03-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/23/JavaEE 使用Gradle发布jar包到远程中央仓库/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JavaEE/">JavaEE</a></p>
                            <p class="item-title"><a href="/2018/03/23/JavaEE 使用Gradle发布jar包到远程中央仓库/" class="title">JavaEE 使用Gradle发布jar包到远程中央仓库</a></p>
                            <p class="item-date"><time datetime="2018-03-23T07:53:56.000Z" itemprop="datePublished">2018-03-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/23/JavaEE 使用Maven发布jar包到远程中央仓库/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JavaEE/">JavaEE</a></p>
                            <p class="item-title"><a href="/2018/03/23/JavaEE 使用Maven发布jar包到远程中央仓库/" class="title">JavaEE 使用Maven发布jar包到远程中央仓库</a></p>
                            <p class="item-date"><time datetime="2018-03-23T07:00:56.000Z" itemprop="datePublished">2018-03-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/22/JavaEE 发布jar包到远程maven中央仓库/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JavaEE/">JavaEE</a></p>
                            <p class="item-title"><a href="/2018/03/22/JavaEE 发布jar包到远程maven中央仓库/" class="title">JavaEE 发布jar包到远程maven中央仓库</a></p>
                            <p class="item-date"><time datetime="2018-03-22T03:33:56.000Z" itemprop="datePublished">2018-03-22</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaEE/">JavaEE</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/消息队列/">消息队列</a><span class="category-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaEE/">JavaEE</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息队列/">消息队列</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/JavaEE/" style="font-size: 16.67px;">JavaEE</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/服务器/" style="font-size: 13.33px;">服务器</a> <a href="/tags/消息队列/" style="font-size: 16.67px;">消息队列</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 CatalpaFlat<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>